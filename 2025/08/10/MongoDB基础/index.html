<!DOCTYPE html><html lang="en" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no"><title>MongoDB基础 | Joie's Blog</title><meta name="keywords" content="MongoDB"><meta name="author" content="Joie"><meta name="copyright" content="Joie"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#f7f9fe"><meta name="mobile-web-app-capable" content="yes"><meta name="apple-touch-fullscreen" content="yes"><meta name="apple-mobile-web-app-title" content="MongoDB基础"><meta name="application-name" content="MongoDB基础"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="#f7f9fe"><meta property="og:type" content="article"><meta property="og:title" content="MongoDB基础"><meta property="og:url" content="http://example.com/2025/08/10/MongoDB%E5%9F%BA%E7%A1%80/index.html"><meta property="og:site_name" content="Joie's Blog"><meta property="og:description" content="MongoDB 基础入门阶段一：MongoDB 基础入门目标：掌握 MongoDB 的基本概念、安装与基础操作。 1. 了解 NoSQL 与 MongoDB什么是 NoSQL？NoSQL（Not Only SQL）是一类非关系型数据库的统称，它们不使用传统的表格关系模型来存储数据。 与关系型数据库（"><meta property="og:locale" content="en"><meta property="og:image" content="https://origin.picgo.net/2025/08/10/mongo767c67668fc74417.png"><meta property="article:author" content="Joie"><meta property="article:tag"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://origin.picgo.net/2025/08/10/mongo767c67668fc74417.png"><meta name="description" content="MongoDB 基础入门阶段一：MongoDB 基础入门目标：掌握 MongoDB 的基本概念、安装与基础操作。 1. 了解 NoSQL 与 MongoDB什么是 NoSQL？NoSQL（Not Only SQL）是一类非关系型数据库的统称，它们不使用传统的表格关系模型来存储数据。 与关系型数据库（"><link rel="shortcut icon" href="/favicon.ico"><link rel="canonical" href="http://example.com/2025/08/10/MongoDB%E5%9F%BA%E7%A1%80/"><link rel="preconnect" href="//cdn.cbd.int"/><meta name="google-site-verification" content="xxx"/><meta name="baidu-site-verification" content="code-xxx"/><meta name="msvalidate.01" content="xxx"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.cbd.int/@fortawesome/fontawesome-free@6.4.0/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.cbd.int/node-snackbar@0.1.16/dist/snackbar.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.cbd.int/@fancyapps/ui@5.0.28/dist/fancybox/fancybox.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://npm.elemecdn.com/anzhiyu-theme-static@1.0.0/swiper/swiper.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = {
  linkPageTop: undefined,
  peoplecanvas: undefined,
  postHeadAiDescription: {"enable":true,"gptName":"AnZhiYu","mode":"local","switchBtn":false,"btnLink":"https://afdian.net/item/886a79d4db6711eda42a52540025c377","randomNum":3,"basicWordCount":1000,"key":"xxxx","Referer":"https://xx.xx/"},
  diytitle: {"enable":true,"leaveTitle":"Here","backTitle":"Welcome"},
  LA51: undefined,
  greetingBox: {"enable":true,"default":"晚上好👋","list":[{"greeting":"晚安😴","startTime":0,"endTime":5},{"greeting":"早上好鸭👋, 祝你一天好心情！","startTime":6,"endTime":9},{"greeting":"上午好👋, 状态很好，鼓励一下～","startTime":10,"endTime":10},{"greeting":"11点多啦, 在坚持一下就吃饭啦～","startTime":11,"endTime":11},{"greeting":"午安👋, 宝贝","startTime":12,"endTime":14},{"greeting":"🌈充实的一天辛苦啦！","startTime":14,"endTime":18},{"greeting":"19点喽, 奖励一顿丰盛的大餐吧🍔。","startTime":19,"endTime":19},{"greeting":"晚上好👋, 在属于自己的时间好好放松😌~","startTime":20,"endTime":24}]},
  twikooEnvId: '',
  commentBarrageConfig:undefined,
  music_page_default: "nav_music",
  root: '/',
  preloader: {"source":3},
  friends_vue_info: undefined,
  navMusic: true,
  mainTone: {"mode":"api","api":"https://img2color-go.vercel.app/api?img=","cover_change":true},
  authorStatus: {"skills":["🤖️ 数码科技爱好者","🔍 分享与热心帮助","🏠 智能家居小能手","🔨 设计开发一条龙","🤝 专修交互与设计","🏃 脚踏实地行动派","🧱 团队小组发动机","💢 壮汉人狠话不多"]},
  algolia: undefined,
  localSearch: undefined,
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"简","rightMenuMsgToTraditionalChinese":"转为繁体","rightMenuMsgToSimplifiedChinese":"转为简体"},
  noticeOutdate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":330},
  copy: {
    success: 'Copy successfully',
    error: 'Copy error',
    noSupport: 'The browser does not support'
  },
  relativeDate: {
    homepage: false,
    simplehomepage: true,
    post: false
  },
  runtime: 'days',
  date_suffix: {
    just: 'Just',
    min: 'minutes ago',
    hour: 'hours ago',
    day: 'days ago',
    month: 'months ago'
  },
  copyright: {"copy":true,"copyrightEbable":false,"limitCount":50,"languages":{"author":"Author: Joie","link":"Link: ","source":"Source: Joie's Blog","info":"Copyright is owned by the author. For commercial reprints, please contact the author for authorization. For non-commercial reprints, please indicate the source.","copySuccess":"Copy success, copy and reprint please mark the address of this article"}},
  lightbox: 'fancybox',
  Snackbar: {"chs_to_cht":"Traditional Chinese Activated Manually","cht_to_chs":"Simplified Chinese Activated Manually","day_to_night":"Dark Mode Activated Manually","night_to_day":"Light Mode Activated Manually","bgLight":"#425AEF","bgDark":"#1f1f1f","position":"top-center"},
  source: {
    justifiedGallery: {
      js: 'https://cdn.cbd.int/flickr-justified-gallery@2.1.2/dist/fjGallery.min.js',
      css: 'https://cdn.cbd.int/flickr-justified-gallery@2.1.2/dist/fjGallery.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: true,
  isAnchor: false,
  shortcutKey: undefined,
  autoDarkmode: true
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  configTitle: 'Joie\'s Blog',
  title: 'MongoDB基础',
  postAI: '',
  pageFillDescription: 'MongoDB 基础入门, 阶段一：MongoDB 基础入门, 1. 了解 NoSQL 与 MongoDB, 什么是 NoSQL？, MongoDB 的特点, 1. 文档模型, 2. 高可用性, 3. 水平扩展, 4. 灵活模式, 适用场景, 2. 安装与环境搭建, 本地安装 MongoDB Community Server, Windows 安装, macOS 安装, Linux 安装, 使用 MongoDB Atlas（云服务）, 安装 MongoDB Compass（可视化工具）, 3. 基础操作, 数据类型, 数据库、集合、文档的概念, 数据库（Database）, 集合（Collection）, 文档（Document）, CRUD 操作, 创建（Create）, 读取（Read）, 更新（Update）, 删除（Delete）, 查询操作符, 比较操作符, 逻辑操作符, 元素操作符, 数组操作符, 4. 索引基础, 索引的重要性, 创建单字段索引, 创建复合索引, 索引类型, 单字段索引, 多字段索引, 1. 单字段索引, 2. 复合索引, 3. 多键索引（数组字段）, 4. 地理空间索引, 5. 文本索引, 6. 哈希索引, 索引管理, 索引最佳实践, 5. 实践练习, 练习1：用户管理系统, 练习2：博客系统, 常用资源基础入门阶段一基础入门目标掌握的基本概念安装与基础操作了解与什么是是一类非关系型数据库的统称它们不使用传统的表格关系模型来存储数据与关系型数据库如的区别特性关系型数据库数据库数据模型表格结构预定义模式灵活模式多种数据模型事务支持事务通常只支持基本可用软状态最终一致性扩展性垂直扩展增加硬件水平扩展增加节点查询语言特定或查询语言一致性强一致性最终一致性的特点文档模型格式支持更多数据类型嵌套文档可以存储复杂的层次结构数据数组支持原生支持数组类型张三北京中关村大街读书游泳编程高可用性副本集自动故障转移分片集群水平扩展能力自动备份支持增量备份和全量备份水平扩展通过分片将数据分布到多个服务器支持读写分离自动负载均衡灵活模式同一集合中的文档可以有不同的字段支持动态添加字段无需预定义表结构适用场景日志系统存储应用日志系统日志内容管理博客系统文档存储实时分析大数据分析实时统计应用传感器数据设备状态游戏数据用户档案游戏状态电商平台商品目录用户行为安装与环境搭建本地安装安装访问官网下载版本的安装包运行安装程序选择安装安装可选配置环境变量安装使用安装启动服务或者手动启动安装启动服务使用云服务访问创建免费账户创建新集群选择免费层配置网络访问白名单创建数据库用户获取连接字符串连接字符串示例安装可视化工具从官网下载对应平台的安装包安装完成后启动连接到本地或远程实例提供图形化界面进行数据操作基础操作数据类型支持多种数据类型这些数据类型能够满足不同的应用场景需求以下是中常见的数据类型用于存储浮点数值存储编码的字符串确保在不同语言环境下的兼容性表示嵌入式文档允许在一个文档内部包含另一个文档或对象支持存储数组或列表可以包含不同类型的值包括其他文档用于存储二进制数据如图像文件等是一种特殊的十六进制数通常用作字段的默认值保证每个文档的唯一性存储和值使用时间格式表示日期和时间可用于记录事件发生的时间戳表示空值或不存在的字段存储正则表达式常用于复杂的字符串匹配操作可以存储并执行代码片段尽管这不是最常见的用途主要用于与其他编程语言交互时保留特定语言的符号信息在大多数情况下与字符串相似用来存储带有局部变量范围的代码分别用于存储位和位整数提供高精度的十进制数存储适用于金融计算等需要精确小数处理的场景特殊的数据类型分别比所有其他可能的键值小或大通常用于特殊比较或排序逻辑每种数据类型都有其适用的场景选择合适的数据类型有助于提高查询效率减少存储空间以及简化应用程序逻辑例如使用作为主键可以自动为每个文档生成唯一的标识符而使用嵌入式文档类型可以构建复杂的数据结构减少数据库查询次数提高性能理解这些数据类型是有效利用的关键数据库集合文档的概念数据库中的顶级容器包含多个集合每个数据库有独立的权限和配置创建切换到数据库查看所有数据库查看当前数据库集合类似于关系型数据库中的表存储文档的容器无需预定义结构创建集合隐式创建张三显式创建集合查看所有集合文档集合中的单个记录格式存储支持嵌套结构和数组文档示例张三操作创建插入单个文档李四插入多个文档王五赵六插入文档并指定自定义用户读取查询所有文档查询特定条件的文档查询单个文档张三限制返回数量跳过文档数量排序升序降序投影只返回指定字段更新更新单个文档张三更新多个文档替换整个文档张三张三使用不存在则插入新用户删除删除单个文档张三删除多个文档删除集合中的所有文档删除整个集合删除整个数据库查询操作符比较操作符等于不等于大于大于等于小于小于等于在指定范围内不在指定范围内逻辑操作符操作默认北京操作上海和组合北京上海操作元素操作符字段存在字段类型检查数组操作符包含所有元素读书游泳包含任意元素读书数组大小数组元素匹配读书索引基础索引的重要性提高查询性能避免全集合扫描支持排序操作避免内存排序唯一性约束确保数据唯一性文本搜索支持全文检索创建单字段索引创建升序索引创建降序索引创建唯一索引创建稀疏索引只索引存在该字段的文档查看集合的索引删除索引创建复合索引创建复合索引创建复合唯一索引复合索引的顺序很重要查询北京可以使用索引查询北京不能有效使用索引索引类型在中索引可以是升序或降序这主要影响的是索引中数据的排序方式尽管升序和降序索引在查询性能上对于单字段索引来说几乎没有差别它们的区别主要体现在多字段索引以及排序操作中单字段索引升序索引当你创建一个升序索引时会根据该字段的值从小到大对文档进行排序降序索引相反如果你创建的是降序索引那么将按照该字段的值从大到小来对文档排序对于单字段索引而言升序和降序索引的实际查询效率几乎相同因为能够高效地遍历索引树无论其顺序如何多字段索引当涉及到包含多个字段的复合索引时升序和降序索引的选择变得更为重要尤其是在执行需要对结果集进行排序的查询时如果你的查询经常需要基于某些字段以特定顺序返回结果那么正确设置每个字段的索引顺序升序或降序可以使直接使用索引来满足排序需求而无需执行额外的排序步骤例如如果一个查询通常要求按字段降序然后按字段升序排列结果那么为字段创建降序索引且为字段创建升序索引可能会提高性能在某些情况下特别是当查询条件与排序顺序相匹配时正确的索引顺序可以帮助更有效地执行查询因为它可以直接行走索引来获取已排序的结果而不是先获取所有符合条件的文档再进行排序总之在大多数情况下对于单个字段的索引选择升序还是降序并不会显著影响查询性能然而在设计复合索引时考虑到查询中常用的排序模式合理安排各个字段的索引顺序可以优化查询性能单字段索引最常见的索引类型复合索引支持多字段查询多键索引数组字段自动为数组字段创建地理空间索引索引用于地理空间查询文本索引支持全文搜索哈希索引用于分片集群索引管理查看索引使用情况查看查询计划后台创建索引生产环境推荐部分索引只索引满足条件的文档索引最佳实践为查询条件创建索引子句中的字段为排序字段创建索引中的字段避免过多索引每个索引都会占用存储空间和影响写入性能使用复合索引减少索引数量提高查询效率监控索引使用情况删除未使用的索引实践练习练习用户管理系统创建用户集合插入测试数据张三北京读书游泳李四上海编程游戏王五广州旅游摄影创建索引查询练习查找年龄大于岁的用户查找北京的年轻用户年龄小于北京按年龄排序统计各城市的用户数量练习博客系统创建博客集合插入博客文章入门指南是一个强大的数据库张三数据库开发实践是一个基于引擎的运行时李四后端创建索引全文搜索热门文章按浏览量排序常用资源官方文档大学免费课程社区论坛',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2025-08-10 18:29:06',
  postMainColor: '#229ab2ff',
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
      win.saveToLocal = {
        set: (key, value, ttl) => {
          if (ttl === 0) return
          const now = Date.now()
          const expiry = now + ttl * 86400000
          const item = {
            value,
            expiry
          }
          localStorage.setItem(key, JSON.stringify(item))
        },
      
        get: key => {
          const itemStr = localStorage.getItem(key)
      
          if (!itemStr) {
            return undefined
          }
          const item = JSON.parse(itemStr)
          const now = Date.now()
      
          if (now > item.expiry) {
            localStorage.removeItem(key)
            return undefined
          }
          return item.value
        }
      }
    
      win.getScript = (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        script.onerror = reject
        script.onload = script.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          script.onload = script.onreadystatechange = null
          resolve()
        }

        Object.keys(attr).forEach(key => {
          script.setAttribute(key, attr[key])
        })

        document.head.appendChild(script)
      })
    
      win.getCSS = (url, id = false) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onerror = reject
        link.onload = link.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          link.onload = link.onreadystatechange = null
          resolve()
        }
        document.head.appendChild(link)
      })
    
      win.activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#18171d')
        }
      }
      win.activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#f7f9fe')
        }
      }
      const t = saveToLocal.get('theme')
    
          const isDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches
          const isLightMode = window.matchMedia('(prefers-color-scheme: light)').matches
          const isNotSpecified = window.matchMedia('(prefers-color-scheme: no-preference)').matches
          const hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

          if (t === undefined) {
            if (isLightMode) activateLightMode()
            else if (isDarkMode) activateDarkMode()
            else if (isNotSpecified || hasNoSupport) {
              const now = new Date()
              const hour = now.getHours()
              const isNight = hour <= 6 || hour >= 18
              isNight ? activateDarkMode() : activateLightMode()
            }
            window.matchMedia('(prefers-color-scheme: dark)').addListener(e => {
              if (saveToLocal.get('theme') === undefined) {
                e.matches ? activateDarkMode() : activateLightMode()
              }
            })
          } else if (t === 'light') activateLightMode()
          else activateDarkMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
      const detectApple = () => {
        if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
          document.documentElement.classList.add('apple')
        }
      }
      detectApple()
    })(window)</script><meta name="generator" content="Hexo 7.3.0"></head><body data-type="anzhiyu"><div id="web_bg"></div><div id="an_music_bg"></div><div id="loading-box" onclick="document.getElementById(&quot;loading-box&quot;).classList.add(&quot;loaded&quot;)"><div class="loading-bg"><img class="loading-img nolazyload" alt="加载头像" src="https://img.picgo.net/2025/06/23/tom09183405464859c2.jpg"/><div class="loading-image-dot"></div></div></div><script>const preloader = {
  endLoading: () => {
    document.getElementById('loading-box').classList.add("loaded");
  },
  initLoading: () => {
    document.getElementById('loading-box').classList.remove("loaded")
  }
}
window.addEventListener('load',()=> { preloader.endLoading() })
setTimeout(function(){preloader.endLoading();},10000)

if (true) {
  document.addEventListener('pjax:send', () => { preloader.initLoading() })
  document.addEventListener('pjax:complete', () => { preloader.endLoading() })
}</script><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.1.10/progress_bar/progress_bar.css"/><script async="async" src="https://cdn.cbd.int/pace-js@1.2.4/pace.min.js" data-pace-options="{ &quot;restartOnRequestAfter&quot;:false,&quot;eventLag&quot;:false}"></script><div class="post" id="body-wrap"><header class="post-bg" id="page-header"><nav id="nav"><div id="nav-group"><span id="blog_name"><div class="back-home-button"><i class="anzhiyufont anzhiyu-icon-grip-vertical"></i><div class="back-menu-list-groups"><div class="back-menu-list-group"><div class="back-menu-list-title">个人主页</div><div class="back-menu-list"><a class="back-menu-item" target="_blank" rel="noopener" href="https://benedicttom.github.io/home/" title="个人主页"><img class="back-menu-item-icon" src="/img/favicon.ico" alt="个人主页"/><span class="back-menu-item-text">个人主页</span></a></div></div></div></div><a id="site-name" href="/" accesskey="h"><div class="title">Joie's Blog</div><i class="anzhiyufont anzhiyu-icon-house-chimney"></i></a></span><div class="mask-name-container"><div id="name-container"><a id="page-name" href="javascript:anzhiyu.scrollToDest(0, 500)">PAGE_NAME</a></div></div><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 文章</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/archives/"><i class="anzhiyufont anzhiyu-icon-box-archive faa-tada" style="font-size: 0.9em;"></i><span> 隧道</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/categories/"><i class="anzhiyufont anzhiyu-icon-shapes faa-tada" style="font-size: 0.9em;"></i><span> 分类</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/tags/"><i class="anzhiyufont anzhiyu-icon-tags faa-tada" style="font-size: 0.9em;"></i><span> 标签</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 友链</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/link/"><i class="anzhiyufont anzhiyu-icon-link faa-tada" style="font-size: 0.9em;"></i><span> 友人帐</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/comments/"><i class="anzhiyufont anzhiyu-icon-envelope faa-tada" style="font-size: 0.9em;"></i><span> 留言板</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 我的</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/music/"><i class="anzhiyufont anzhiyu-icon-music faa-tada" style="font-size: 0.9em;"></i><span> 音乐馆</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/album/"><i class="anzhiyufont anzhiyu-icon-images faa-tada" style="font-size: 0.9em;"></i><span> 相册集</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 关于</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/about/"><i class="anzhiyufont anzhiyu-icon-paper-plane faa-tada" style="font-size: 0.9em;"></i><span> 关于本人</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/essay/"><i class="anzhiyufont anzhiyu-icon-lightbulb faa-tada" style="font-size: 0.9em;"></i><span> 闲言碎语</span></a></li><li><a class="site-page child faa-parent animated-hover" href="javascript:toRandomPost()"><i class="anzhiyufont anzhiyu-icon-shoe-prints1 faa-tada" style="font-size: 0.9em;"></i><span> 随便逛逛</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/equipment/"><i class="anzhiyufont anzhiyu-icon-dice-d20 faa-tada" style="font-size: 0.9em;"></i><span> 我的装备</span></a></li></ul></div></div></div><div id="nav-right"><div class="nav-button" id="randomPost_button"><a class="site-page" onclick="toRandomPost()" title="随机前往一个文章" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-dice"></i></a></div><input id="center-console" type="checkbox"/><label class="widget" for="center-console" title="中控台" onclick="anzhiyu.switchConsole();"><i class="left"></i><i class="widget center"></i><i class="widget right"></i></label><div id="console"><div class="console-card-group-reward"><ul class="reward-all console-card"><li class="reward-item"><a href="https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/qrcode-weichat.png" target="_blank"><img class="post-qr-code-img" alt="微信" src="https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/qrcode-weichat.png"/></a><div class="post-qr-code-desc">微信</div></li><li class="reward-item"><a href="https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/qrcode-alipay.png" target="_blank"><img class="post-qr-code-img" alt="支付宝" src="https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/qrcode-alipay.png"/></a><div class="post-qr-code-desc">支付宝</div></li></ul></div><div class="console-card-group"><div class="console-card-group-left"><div class="console-card" id="card-newest-comments"><div class="card-content"><div class="author-content-item-tips">互动</div><span class="author-content-item-title"> Newest Comments</span></div><div class="aside-list"><span>loading...</span></div></div></div><div class="console-card-group-right"><div class="console-card tags"><div class="card-content"><div class="author-content-item-tips">兴趣点</div><span class="author-content-item-title">寻找你感兴趣的领域</span><div class="card-tags"><div class="item-headline"></div><div class="card-tag-cloud"><a href="/tags/AMQP/" style="font-size: 1.05rem;">AMQP<sup>1</sup></a><a href="/tags/CI-CD/" style="font-size: 1.05rem;">CI/CD<sup>1</sup></a><a href="/tags/ElasticSearch/" style="font-size: 1.05rem;">ElasticSearch<sup>3</sup></a><a href="/tags/Hexo/" style="font-size: 1.05rem;">Hexo<sup>1</sup></a><a href="/tags/Http/" style="font-size: 1.05rem;">Http<sup>2</sup></a><a href="/tags/I-O/" style="font-size: 1.05rem;">I/O<sup>2</sup></a><a href="/tags/Java/" style="font-size: 1.05rem;">Java<sup>6</sup></a><a href="/tags/MongoDB/" style="font-size: 1.05rem;">MongoDB<sup>1</sup></a><a href="/tags/Mysql/" style="font-size: 1.05rem;">Mysql<sup>2</sup></a><a href="/tags/ORM/" style="font-size: 1.05rem;">ORM<sup>3</sup></a><a href="/tags/Python/" style="font-size: 1.05rem;">Python<sup>3</sup></a><a href="/tags/Redis/" style="font-size: 1.05rem;">Redis<sup>5</sup></a><a href="/tags/Rpc/" style="font-size: 1.05rem;">Rpc<sup>2</sup></a><a href="/tags/Spring/" style="font-size: 1.05rem;">Spring<sup>1</sup></a><a href="/tags/Spring-Cloud/" style="font-size: 1.05rem;">Spring Cloud<sup>3</sup></a><a href="/tags/Spring-Data/" style="font-size: 1.05rem;">Spring Data<sup>5</sup></a><a href="/tags/Swagger/" style="font-size: 1.05rem;">Swagger<sup>1</sup></a><a href="/tags/%E4%BA%91%E5%8E%9F%E7%94%9F/" style="font-size: 1.05rem;">云原生<sup>1</sup></a><a href="/tags/%E5%85%AB%E8%82%A1/" style="font-size: 1.05rem;">八股<sup>1</sup></a><a href="/tags/%E5%8A%9B%E6%89%A3/" style="font-size: 1.05rem;">力扣<sup>10</sup></a><a href="/tags/%E5%A4%9A%E7%BA%BF%E7%A8%8B/" style="font-size: 1.05rem;">多线程<sup>7</sup></a><a href="/tags/%E5%AE%9A%E6%97%B6%E4%BB%BB%E5%8A%A1/" style="font-size: 1.05rem;">定时任务<sup>3</sup></a><a href="/tags/%E5%B9%B6%E5%8F%91/" style="font-size: 1.05rem;">并发<sup>7</sup></a><a href="/tags/%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/" style="font-size: 1.05rem;">开发工具<sup>2</sup></a><a href="/tags/%E6%8E%A8%E8%8D%90/" style="font-size: 1.05rem;">推荐<sup>1</sup></a><a href="/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/" style="font-size: 1.05rem;">数据结构<sup>4</sup></a><a href="/tags/%E6%9D%83%E9%99%90%E6%A0%A1%E9%AA%8C/" style="font-size: 1.05rem;">权限校验<sup>3</sup></a><a href="/tags/%E6%9E%B6%E6%9E%84/" style="font-size: 1.05rem;">架构<sup>1</sup></a><a href="/tags/%E6%A0%91/" style="font-size: 1.05rem;">树<sup>1</sup></a><a href="/tags/%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97/" style="font-size: 1.05rem;">消息队列<sup>4</sup></a><a href="/tags/%E7%AE%97%E6%B3%95/" style="font-size: 1.05rem;">算法<sup>1</sup></a><a href="/tags/%E7%BC%93%E5%AD%98/" style="font-size: 1.05rem;">缓存<sup>2</sup></a><a href="/tags/%E8%BF%90%E7%BB%B4/" style="font-size: 1.05rem;">运维<sup>2</sup></a><a href="/tags/%E9%9B%86%E5%90%88/" style="font-size: 1.05rem;">集合<sup>1</sup></a><a href="/tags/%E9%9D%A2%E8%AF%95/" style="font-size: 1.05rem;">面试<sup>3</sup></a></div></div><hr/></div></div><div class="console-card history"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-box-archiv"></i><span>文章</span></div><div class="card-archives"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-archive"></i><span>Archives</span></div><ul class="card-archive-list"><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2025/08/"><span class="card-archive-list-date">August 2025</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">38</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2025/07/"><span class="card-archive-list-date">July 2025</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">28</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2025/06/"><span class="card-archive-list-date">June 2025</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">8</span><span>篇</span></div></a></li></ul></div><hr/></div></div></div><div class="button-group"><div class="console-btn-item"><a class="darkmode_switchbutton" title="显示模式切换" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-moon"></i></a></div><div class="console-btn-item" id="consoleHideAside" onclick="anzhiyu.hideAsideBtn()" title="边栏显示控制"><a class="asideSwitch"><i class="anzhiyufont anzhiyu-icon-arrows-left-right"></i></a></div><div class="console-btn-item" id="consoleMusic" onclick="anzhiyu.musicToggle()" title="音乐开关"><a class="music-switch"><i class="anzhiyufont anzhiyu-icon-music"></i></a></div></div><div class="console-mask" onclick="anzhiyu.hideConsole()" href="javascript:void(0);"></div></div><div class="nav-button" id="nav-totop"><a class="totopbtn" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i><span id="percent" onclick="anzhiyu.scrollToDest(0,500)">0</span></a></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);" title="切换"><i class="anzhiyufont anzhiyu-icon-bars"></i></a></div></div></div></nav><div id="post-info"><div id="post-firstinfo"><div class="meta-firstline"><a class="post-meta-original">原创</a><span class="post-meta-categories"><span class="post-meta-separator"></span><i class="anzhiyufont anzhiyu-icon-inbox post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/" itemprop="url">数据库</a></span><span class="article-meta tags"><a class="article-meta__tags" href="/tags/MongoDB/" tabindex="-1" itemprop="url"> <span> <i class="anzhiyufont anzhiyu-icon-hashtag"></i>MongoDB</span></a></span></div></div><h1 class="post-title" itemprop="name headline">MongoDB基础</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="anzhiyufont anzhiyu-icon-calendar-days post-meta-icon"></i><span class="post-meta-label">Created</span><time class="post-meta-date-created" itemprop="dateCreated datePublished" datetime="2025-08-10T09:41:08.559Z" title="Created 2025-08-10 17:41:08">2025-08-10</time><span class="post-meta-separator"></span><i class="anzhiyufont anzhiyu-icon-history post-meta-icon"></i><span class="post-meta-label">Updated</span><time class="post-meta-date-updated" itemprop="dateCreated datePublished" datetime="2025-08-10T10:29:06.932Z" title="Updated 2025-08-10 18:29:06">2025-08-10</time></span></div><div class="meta-secondline"><span class="post-meta-separator">       </span><span class="post-meta-position" title="作者IP属地为北京"><i class="anzhiyufont anzhiyu-icon-location-dot"></i>北京</span></div></div></div><section class="main-hero-waves-area waves-area"><svg class="waves-svg" xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto"><defs><path id="gentle-wave" d="M -160 44 c 30 0 58 -18 88 -18 s 58 18 88 18 s 58 -18 88 -18 s 58 18 88 18 v 44 h -352 Z"></path></defs><g class="parallax"><use href="#gentle-wave" x="48" y="0"></use><use href="#gentle-wave" x="48" y="3"></use><use href="#gentle-wave" x="48" y="5"></use><use href="#gentle-wave" x="48" y="7"></use></g></svg></section><div id="post-top-cover"><img class="nolazyload" id="post-top-bg" src="https://origin.picgo.net/2025/08/10/mongo767c67668fc74417.png"></div></header><main id="blog-container"><div class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container" itemscope itemtype="http://example.com/2025/08/10/MongoDB%E5%9F%BA%E7%A1%80/"><header><a class="post-meta-categories" href="/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/" itemprop="url">数据库</a><a href="/tags/MongoDB/" tabindex="-1" itemprop="url">MongoDB</a><h1 id="CrawlerTitle" itemprop="name headline">MongoDB基础</h1><span itemprop="author" itemscope itemtype="http://schema.org/Person">Joie</span><time itemprop="dateCreated datePublished" datetime="2025-08-10T09:41:08.559Z" title="Created 2025-08-10 17:41:08">2025-08-10</time><time itemprop="dateCreated datePublished" datetime="2025-08-10T10:29:06.932Z" title="Updated 2025-08-10 18:29:06">2025-08-10</time></header><h1 id="MongoDB-基础入门"><a href="#MongoDB-基础入门" class="headerlink" title="MongoDB 基础入门"></a>MongoDB 基础入门</h1><h2 id="阶段一：MongoDB-基础入门"><a href="#阶段一：MongoDB-基础入门" class="headerlink" title="阶段一：MongoDB 基础入门"></a>阶段一：MongoDB 基础入门</h2><p><strong>目标：掌握 MongoDB 的基本概念、安装与基础操作。</strong></p>
<h2 id="1-了解-NoSQL-与-MongoDB"><a href="#1-了解-NoSQL-与-MongoDB" class="headerlink" title="1. 了解 NoSQL 与 MongoDB"></a>1. 了解 NoSQL 与 MongoDB</h2><h3 id="什么是-NoSQL？"><a href="#什么是-NoSQL？" class="headerlink" title="什么是 NoSQL？"></a>什么是 NoSQL？</h3><p>NoSQL（Not Only SQL）是一类非关系型数据库的统称，它们不使用传统的表格关系模型来存储数据。</p>
<p><strong>与关系型数据库（如 MySQL）的区别：</strong></p>
<table>
<thead>
<tr>
<th>特性</th>
<th>关系型数据库</th>
<th>NoSQL数据库</th>
</tr>
</thead>
<tbody><tr>
<td>数据模型</td>
<td>表格结构，预定义模式</td>
<td>灵活模式，多种数据模型</td>
</tr>
<tr>
<td>事务支持</td>
<td>ACID事务</td>
<td>通常只支持BASE（基本可用、软状态、最终一致性）</td>
</tr>
<tr>
<td>扩展性</td>
<td>垂直扩展（增加硬件）</td>
<td>水平扩展（增加节点）</td>
</tr>
<tr>
<td>查询语言</td>
<td>SQL</td>
<td>特定API或查询语言</td>
</tr>
<tr>
<td>一致性</td>
<td>强一致性</td>
<td>最终一致性</td>
</tr>
</tbody></table>
<h3 id="MongoDB-的特点"><a href="#MongoDB-的特点" class="headerlink" title="MongoDB 的特点"></a>MongoDB 的特点</h3><h4 id="1-文档模型"><a href="#1-文档模型" class="headerlink" title="1. 文档模型"></a>1. 文档模型</h4><ul>
<li><strong>BSON格式</strong>：Binary JSON，支持更多数据类型</li>
<li><strong>嵌套文档</strong>：可以存储复杂的层次结构数据</li>
<li><strong>数组支持</strong>：原生支持数组类型</li>
</ul>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;_id&quot;</span><span class="punctuation">:</span> ObjectId(<span class="string">&quot;507f1f77bcf86cd799439011&quot;</span>)<span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;张三&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;age&quot;</span><span class="punctuation">:</span> <span class="number">25</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;email&quot;</span><span class="punctuation">:</span> <span class="string">&quot;zhangsan@example.com&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;address&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;city&quot;</span><span class="punctuation">:</span> <span class="string">&quot;北京&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;street&quot;</span><span class="punctuation">:</span> <span class="string">&quot;中关村大街&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;postalCode&quot;</span><span class="punctuation">:</span> <span class="string">&quot;100080&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;hobbies&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;读书&quot;</span><span class="punctuation">,</span> <span class="string">&quot;游泳&quot;</span><span class="punctuation">,</span> <span class="string">&quot;编程&quot;</span><span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;createdAt&quot;</span><span class="punctuation">:</span> ISODate(<span class="string">&quot;2024-01-01T00:00:00Z&quot;</span>)</span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<h4 id="2-高可用性"><a href="#2-高可用性" class="headerlink" title="2. 高可用性"></a>2. 高可用性</h4><ul>
<li><strong>副本集（Replica Set）</strong>：自动故障转移</li>
<li><strong>分片集群（Sharding）</strong>：水平扩展能力</li>
<li><strong>自动备份</strong>：支持增量备份和全量备份</li>
</ul>
<h4 id="3-水平扩展"><a href="#3-水平扩展" class="headerlink" title="3. 水平扩展"></a>3. 水平扩展</h4><ul>
<li>通过分片将数据分布到多个服务器</li>
<li>支持读写分离</li>
<li>自动负载均衡</li>
</ul>
<h4 id="4-灵活模式"><a href="#4-灵活模式" class="headerlink" title="4. 灵活模式"></a>4. 灵活模式</h4><ul>
<li>同一集合中的文档可以有不同的字段</li>
<li>支持动态添加字段</li>
<li>无需预定义表结构</li>
</ul>
<h3 id="适用场景"><a href="#适用场景" class="headerlink" title="适用场景"></a>适用场景</h3><ul>
<li><strong>日志系统</strong>：存储应用日志、系统日志</li>
<li><strong>内容管理</strong>：博客、CMS系统、文档存储</li>
<li><strong>实时分析</strong>：大数据分析、实时统计</li>
<li><strong>IoT应用</strong>：传感器数据、设备状态</li>
<li><strong>游戏数据</strong>：用户档案、游戏状态</li>
<li><strong>电商平台</strong>：商品目录、用户行为</li>
</ul>
<h2 id="2-安装与环境搭建"><a href="#2-安装与环境搭建" class="headerlink" title="2. 安装与环境搭建"></a>2. 安装与环境搭建</h2><h3 id="本地安装-MongoDB-Community-Server"><a href="#本地安装-MongoDB-Community-Server" class="headerlink" title="本地安装 MongoDB Community Server"></a>本地安装 MongoDB Community Server</h3><h4 id="Windows-安装"><a href="#Windows-安装" class="headerlink" title="Windows 安装"></a>Windows 安装</h4><ol>
<li>访问 <a target="_blank" rel="noopener" href="https://www.mongodb.com/try/download/community">MongoDB 官网</a></li>
<li>下载 Windows 版本的 MSI 安装包</li>
<li>运行安装程序，选择”Complete”安装</li>
<li>安装 MongoDB Compass（可选）</li>
<li>配置环境变量</li>
</ol>
<h4 id="macOS-安装"><a href="#macOS-安装" class="headerlink" title="macOS 安装"></a>macOS 安装</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 使用 Homebrew 安装</span></span><br><span class="line">brew tap mongodb/brew</span><br><span class="line">brew install mongodb-community</span><br><span class="line"></span><br><span class="line"><span class="comment"># 启动 MongoDB 服务</span></span><br><span class="line">brew services start mongodb/brew/mongodb-community</span><br><span class="line"></span><br><span class="line"><span class="comment"># 或者手动启动</span></span><br><span class="line">mongod --config /usr/local/etc/mongod.conf</span><br></pre></td></tr></table></figure>

<h4 id="Linux-安装"><a href="#Linux-安装" class="headerlink" title="Linux 安装"></a>Linux 安装</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Ubuntu/Debian</span></span><br><span class="line">wget -qO - https://www.mongodb.org/static/pgp/server-7.0.asc | <span class="built_in">sudo</span> apt-key add -</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;deb [ arch=amd64,arm64 ] https://repo.mongodb.org/apt/ubuntu focal/mongodb-org/7.0 multiverse&quot;</span> | <span class="built_in">sudo</span> <span class="built_in">tee</span> /etc/apt/sources.list.d/mongodb-org-7.0.list</span><br><span class="line"><span class="built_in">sudo</span> apt-get update</span><br><span class="line"><span class="built_in">sudo</span> apt-get install -y mongodb-org</span><br><span class="line"></span><br><span class="line"><span class="comment"># 启动服务</span></span><br><span class="line"><span class="built_in">sudo</span> systemctl start mongod</span><br><span class="line"><span class="built_in">sudo</span> systemctl <span class="built_in">enable</span> mongod</span><br></pre></td></tr></table></figure>

<h3 id="使用-MongoDB-Atlas（云服务）"><a href="#使用-MongoDB-Atlas（云服务）" class="headerlink" title="使用 MongoDB Atlas（云服务）"></a>使用 MongoDB Atlas（云服务）</h3><ol>
<li>访问 <a target="_blank" rel="noopener" href="https://www.mongodb.com/atlas">MongoDB Atlas</a></li>
<li>创建免费账户</li>
<li>创建新集群（选择免费层 M0）</li>
<li>配置网络访问（IP白名单）</li>
<li>创建数据库用户</li>
<li>获取连接字符串</li>
</ol>
<p><strong>连接字符串示例：</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mongodb+srv://username:password@cluster0.xxxxx.mongodb.net/database?retryWrites=true&amp;w=majority</span><br></pre></td></tr></table></figure>

<h3 id="安装-MongoDB-Compass（可视化工具）"><a href="#安装-MongoDB-Compass（可视化工具）" class="headerlink" title="安装 MongoDB Compass（可视化工具）"></a>安装 MongoDB Compass（可视化工具）</h3><ol>
<li>从官网下载对应平台的安装包</li>
<li>安装完成后启动</li>
<li>连接到本地或远程 MongoDB 实例</li>
<li>提供图形化界面进行数据操作</li>
</ol>
<h2 id="3-基础操作"><a href="#3-基础操作" class="headerlink" title="3. 基础操作"></a>3. 基础操作</h2><h3 id="数据类型"><a href="#数据类型" class="headerlink" title="数据类型"></a>数据类型</h3><p>MongoDB支持多种数据类型，这些数据类型能够满足不同的应用场景需求。以下是MongoDB中常见的数据类型：</p>
<ol>
<li><strong>Double</strong>: 用于存储浮点数值。</li>
<li><strong>String</strong>: 存储UTF-8编码的字符串，确保在不同语言环境下的兼容性。</li>
<li><strong>Object</strong>: 表示嵌入式文档，允许在一个文档内部包含另一个文档或对象。</li>
<li><strong>Array</strong>: 支持存储数组或列表，可以包含不同类型的值（包括其他文档）。</li>
<li><strong>Binary Data</strong>: 用于存储二进制数据，如图像、文件等。</li>
<li><strong>ObjectId</strong>: 是一种特殊的十六进制数，通常用作“_id”字段的默认值，保证每个文档的唯一性。</li>
<li><strong>Boolean</strong>: 存储true和false值。</li>
<li><strong>Date</strong>: 使用UTC时间格式表示日期和时间，可用于记录事件发生的时间戳。</li>
<li><strong>Null</strong>: 表示空值或不存在的字段。</li>
<li><strong>Regular Expression</strong>: 存储正则表达式，常用于复杂的字符串匹配操作。</li>
<li><strong>JavaScript</strong>: 可以存储并执行JavaScript代码片段，尽管这不是最常见的用途。</li>
<li><strong>Symbol</strong>: 主要用于与其他编程语言交互时保留特定语言的符号信息，在大多数情况下与字符串相似。</li>
<li><strong>Code with Scope</strong>: 用来存储带有局部变量范围的JavaScript代码。</li>
<li><strong>32-bit Integer &amp; 64-bit Integer</strong>: 分别用于存储32位和64位整数。</li>
<li><strong>Decimal128</strong>: 提供高精度的十进制数存储，适用于金融计算等需要精确小数处理的场景。</li>
<li><strong>Min&#x2F;Max Keys</strong>: 特殊的数据类型，分别比所有其他可能的键值小或大，通常用于特殊比较或排序逻辑。</li>
</ol>
<p>每种数据类型都有其适用的场景，选择合适的数据类型有助于提高查询效率、减少存储空间以及简化应用程序逻辑。例如，使用<code>ObjectId</code>作为主键可以自动为每个文档生成唯一的标识符；而使用嵌入式文档（Object类型）可以构建复杂的数据结构，减少数据库查询次数，提高性能。理解这些数据类型是有效利用MongoDB的关键。</p>
<h3 id="数据库、集合、文档的概念"><a href="#数据库、集合、文档的概念" class="headerlink" title="数据库、集合、文档的概念"></a>数据库、集合、文档的概念</h3><h4 id="数据库（Database）"><a href="#数据库（Database）" class="headerlink" title="数据库（Database）"></a>数据库（Database）</h4><ul>
<li>MongoDB 中的顶级容器</li>
<li>包含多个集合</li>
<li>每个数据库有独立的权限和配置</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 创建/切换到数据库</span></span><br><span class="line">use myDatabase</span><br><span class="line"></span><br><span class="line"><span class="comment">// 查看所有数据库</span></span><br><span class="line">show dbs</span><br><span class="line"></span><br><span class="line"><span class="comment">// 查看当前数据库</span></span><br><span class="line">db</span><br></pre></td></tr></table></figure>

<h4 id="集合（Collection）"><a href="#集合（Collection）" class="headerlink" title="集合（Collection）"></a>集合（Collection）</h4><ul>
<li>类似于关系型数据库中的表</li>
<li>存储文档的容器</li>
<li>无需预定义结构</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 创建集合（隐式创建）</span></span><br><span class="line">db.<span class="property">users</span>.<span class="title function_">insertOne</span>(&#123;<span class="attr">name</span>: <span class="string">&quot;张三&quot;</span>, <span class="attr">age</span>: <span class="number">25</span>&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 显式创建集合</span></span><br><span class="line">db.<span class="title function_">createCollection</span>(<span class="string">&quot;products&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 查看所有集合</span></span><br><span class="line">show collections</span><br></pre></td></tr></table></figure>

<h4 id="文档（Document）"><a href="#文档（Document）" class="headerlink" title="文档（Document）"></a>文档（Document）</h4><ul>
<li>集合中的单个记录</li>
<li>BSON 格式存储</li>
<li>支持嵌套结构和数组</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 文档示例</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;_id&quot;</span>: <span class="title class_">ObjectId</span>(<span class="string">&quot;507f1f77bcf86cd799439011&quot;</span>),</span><br><span class="line">  <span class="string">&quot;name&quot;</span>: <span class="string">&quot;张三&quot;</span>,</span><br><span class="line">  <span class="string">&quot;age&quot;</span>: <span class="number">25</span>,</span><br><span class="line">  <span class="string">&quot;email&quot;</span>: <span class="string">&quot;zhangsan@example.com&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="CRUD-操作"><a href="#CRUD-操作" class="headerlink" title="CRUD 操作"></a>CRUD 操作</h3><h4 id="创建（Create）"><a href="#创建（Create）" class="headerlink" title="创建（Create）"></a>创建（Create）</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 插入单个文档</span></span><br><span class="line">db.<span class="property">users</span>.<span class="title function_">insertOne</span>(&#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&quot;李四&quot;</span>,</span><br><span class="line">  <span class="attr">age</span>: <span class="number">30</span>,</span><br><span class="line">  <span class="attr">email</span>: <span class="string">&quot;lisi@example.com&quot;</span>,</span><br><span class="line">  <span class="attr">createdAt</span>: <span class="keyword">new</span> <span class="title class_">Date</span>()</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 插入多个文档</span></span><br><span class="line">db.<span class="property">users</span>.<span class="title function_">insertMany</span>([</span><br><span class="line">  &#123;<span class="attr">name</span>: <span class="string">&quot;王五&quot;</span>, <span class="attr">age</span>: <span class="number">28</span>, <span class="attr">email</span>: <span class="string">&quot;wangwu@example.com&quot;</span>&#125;,</span><br><span class="line">  &#123;<span class="attr">name</span>: <span class="string">&quot;赵六&quot;</span>, <span class="attr">age</span>: <span class="number">32</span>, <span class="attr">email</span>: <span class="string">&quot;zhaoliu@example.com&quot;</span>&#125;</span><br><span class="line">])</span><br><span class="line"></span><br><span class="line"><span class="comment">// 插入文档并指定 _id</span></span><br><span class="line">db.<span class="property">users</span>.<span class="title function_">insertOne</span>(&#123;</span><br><span class="line">  <span class="attr">_id</span>: <span class="string">&quot;user001&quot;</span>,</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&quot;自定义ID用户&quot;</span>,</span><br><span class="line">  <span class="attr">age</span>: <span class="number">25</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h4 id="读取（Read）"><a href="#读取（Read）" class="headerlink" title="读取（Read）"></a>读取（Read）</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 查询所有文档</span></span><br><span class="line">db.<span class="property">users</span>.<span class="title function_">find</span>()</span><br><span class="line"></span><br><span class="line"><span class="comment">// 查询特定条件的文档</span></span><br><span class="line">db.<span class="property">users</span>.<span class="title function_">find</span>(&#123;<span class="attr">age</span>: &#123;<span class="attr">$gt</span>: <span class="number">25</span>&#125;&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 查询单个文档</span></span><br><span class="line">db.<span class="property">users</span>.<span class="title function_">findOne</span>(&#123;<span class="attr">name</span>: <span class="string">&quot;张三&quot;</span>&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 限制返回数量</span></span><br><span class="line">db.<span class="property">users</span>.<span class="title function_">find</span>().<span class="title function_">limit</span>(<span class="number">5</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 跳过文档数量</span></span><br><span class="line">db.<span class="property">users</span>.<span class="title function_">find</span>().<span class="title function_">skip</span>(<span class="number">5</span>).<span class="title function_">limit</span>(<span class="number">5</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 排序</span></span><br><span class="line">db.<span class="property">users</span>.<span class="title function_">find</span>().<span class="title function_">sort</span>(&#123;<span class="attr">age</span>: <span class="number">1</span>&#125;)  <span class="comment">// 1升序，-1降序</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 投影（只返回指定字段）</span></span><br><span class="line">db.<span class="property">users</span>.<span class="title function_">find</span>(&#123;&#125;, &#123;<span class="attr">name</span>: <span class="number">1</span>, <span class="attr">email</span>: <span class="number">1</span>, <span class="attr">_id</span>: <span class="number">0</span>&#125;)</span><br></pre></td></tr></table></figure>

<h4 id="更新（Update）"><a href="#更新（Update）" class="headerlink" title="更新（Update）"></a>更新（Update）</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 更新单个文档</span></span><br><span class="line">db.<span class="property">users</span>.<span class="title function_">updateOne</span>(</span><br><span class="line">  &#123;<span class="attr">name</span>: <span class="string">&quot;张三&quot;</span>&#125;,</span><br><span class="line">  &#123;<span class="attr">$set</span>: &#123;<span class="attr">age</span>: <span class="number">26</span>, <span class="attr">updatedAt</span>: <span class="keyword">new</span> <span class="title class_">Date</span>()&#125;&#125;</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 更新多个文档</span></span><br><span class="line">db.<span class="property">users</span>.<span class="title function_">updateMany</span>(</span><br><span class="line">  &#123;<span class="attr">age</span>: &#123;<span class="attr">$lt</span>: <span class="number">30</span>&#125;&#125;,</span><br><span class="line">  &#123;<span class="attr">$set</span>: &#123;<span class="attr">status</span>: <span class="string">&quot;young&quot;</span>&#125;&#125;</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 替换整个文档</span></span><br><span class="line">db.<span class="property">users</span>.<span class="title function_">replaceOne</span>(</span><br><span class="line">  &#123;<span class="attr">name</span>: <span class="string">&quot;张三&quot;</span>&#125;,</span><br><span class="line">  &#123;<span class="attr">name</span>: <span class="string">&quot;张三&quot;</span>, <span class="attr">age</span>: <span class="number">26</span>, <span class="attr">email</span>: <span class="string">&quot;zhangsan@example.com&quot;</span>, <span class="attr">status</span>: <span class="string">&quot;active&quot;</span>&#125;</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 使用 upsert（不存在则插入）</span></span><br><span class="line">db.<span class="property">users</span>.<span class="title function_">updateOne</span>(</span><br><span class="line">  &#123;<span class="attr">email</span>: <span class="string">&quot;newuser@example.com&quot;</span>&#125;,</span><br><span class="line">  &#123;<span class="attr">$set</span>: &#123;<span class="attr">name</span>: <span class="string">&quot;新用户&quot;</span>, <span class="attr">age</span>: <span class="number">25</span>&#125;&#125;,</span><br><span class="line">  &#123;<span class="attr">upsert</span>: <span class="literal">true</span>&#125;</span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<h4 id="删除（Delete）"><a href="#删除（Delete）" class="headerlink" title="删除（Delete）"></a>删除（Delete）</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 删除单个文档</span></span><br><span class="line">db.<span class="property">users</span>.<span class="title function_">deleteOne</span>(&#123;<span class="attr">name</span>: <span class="string">&quot;张三&quot;</span>&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 删除多个文档</span></span><br><span class="line">db.<span class="property">users</span>.<span class="title function_">deleteMany</span>(&#123;<span class="attr">age</span>: &#123;<span class="attr">$lt</span>: <span class="number">18</span>&#125;&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 删除集合中的所有文档</span></span><br><span class="line">db.<span class="property">users</span>.<span class="title function_">deleteMany</span>(&#123;&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 删除整个集合</span></span><br><span class="line">db.<span class="property">users</span>.<span class="title function_">drop</span>()</span><br><span class="line"></span><br><span class="line"><span class="comment">// 删除整个数据库</span></span><br><span class="line">db.<span class="title function_">dropDatabase</span>()</span><br></pre></td></tr></table></figure>

<h3 id="查询操作符"><a href="#查询操作符" class="headerlink" title="查询操作符"></a>查询操作符</h3><h4 id="比较操作符"><a href="#比较操作符" class="headerlink" title="比较操作符"></a>比较操作符</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 等于</span></span><br><span class="line">db.<span class="property">users</span>.<span class="title function_">find</span>(&#123;<span class="attr">age</span>: <span class="number">25</span>&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 不等于</span></span><br><span class="line">db.<span class="property">users</span>.<span class="title function_">find</span>(&#123;<span class="attr">age</span>: &#123;<span class="attr">$ne</span>: <span class="number">25</span>&#125;&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 大于</span></span><br><span class="line">db.<span class="property">users</span>.<span class="title function_">find</span>(&#123;<span class="attr">age</span>: &#123;<span class="attr">$gt</span>: <span class="number">25</span>&#125;&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 大于等于</span></span><br><span class="line">db.<span class="property">users</span>.<span class="title function_">find</span>(&#123;<span class="attr">age</span>: &#123;<span class="attr">$gte</span>: <span class="number">25</span>&#125;&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 小于</span></span><br><span class="line">db.<span class="property">users</span>.<span class="title function_">find</span>(&#123;<span class="attr">age</span>: &#123;<span class="attr">$lt</span>: <span class="number">25</span>&#125;&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 小于等于</span></span><br><span class="line">db.<span class="property">users</span>.<span class="title function_">find</span>(&#123;<span class="attr">age</span>: &#123;<span class="attr">$lte</span>: <span class="number">25</span>&#125;&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 在指定范围内</span></span><br><span class="line">db.<span class="property">users</span>.<span class="title function_">find</span>(&#123;<span class="attr">age</span>: &#123;<span class="attr">$in</span>: [<span class="number">25</span>, <span class="number">30</span>, <span class="number">35</span>]&#125;&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 不在指定范围内</span></span><br><span class="line">db.<span class="property">users</span>.<span class="title function_">find</span>(&#123;<span class="attr">age</span>: &#123;<span class="attr">$nin</span>: [<span class="number">25</span>, <span class="number">30</span>, <span class="number">35</span>]&#125;&#125;)</span><br></pre></td></tr></table></figure>

<h4 id="逻辑操作符"><a href="#逻辑操作符" class="headerlink" title="逻辑操作符"></a>逻辑操作符</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// AND 操作（默认）</span></span><br><span class="line">db.<span class="property">users</span>.<span class="title function_">find</span>(&#123;<span class="attr">age</span>: &#123;<span class="attr">$gt</span>: <span class="number">25</span>&#125;, <span class="attr">city</span>: <span class="string">&quot;北京&quot;</span>&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// OR 操作</span></span><br><span class="line">db.<span class="property">users</span>.<span class="title function_">find</span>(&#123;<span class="attr">$or</span>: [&#123;<span class="attr">age</span>: &#123;<span class="attr">$lt</span>: <span class="number">25</span>&#125;&#125;, &#123;<span class="attr">city</span>: <span class="string">&quot;上海&quot;</span>&#125;]&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// AND 和 OR 组合</span></span><br><span class="line">db.<span class="property">users</span>.<span class="title function_">find</span>(&#123;</span><br><span class="line">  <span class="attr">$and</span>: [</span><br><span class="line">    &#123;<span class="attr">age</span>: &#123;<span class="attr">$gte</span>: <span class="number">18</span>&#125;&#125;,</span><br><span class="line">    &#123;<span class="attr">$or</span>: [&#123;<span class="attr">city</span>: <span class="string">&quot;北京&quot;</span>&#125;, &#123;<span class="attr">city</span>: <span class="string">&quot;上海&quot;</span>&#125;]&#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// NOT 操作</span></span><br><span class="line">db.<span class="property">users</span>.<span class="title function_">find</span>(&#123;<span class="attr">age</span>: &#123;<span class="attr">$not</span>: &#123;<span class="attr">$lt</span>: <span class="number">25</span>&#125;&#125;&#125;)</span><br></pre></td></tr></table></figure>

<h4 id="元素操作符"><a href="#元素操作符" class="headerlink" title="元素操作符"></a>元素操作符</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 字段存在</span></span><br><span class="line">db.<span class="property">users</span>.<span class="title function_">find</span>(&#123;<span class="attr">email</span>: &#123;<span class="attr">$exists</span>: <span class="literal">true</span>&#125;&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 字段类型检查</span></span><br><span class="line">db.<span class="property">users</span>.<span class="title function_">find</span>(&#123;<span class="attr">age</span>: &#123;<span class="attr">$type</span>: <span class="string">&quot;number&quot;</span>&#125;&#125;)</span><br></pre></td></tr></table></figure>

<h4 id="数组操作符"><a href="#数组操作符" class="headerlink" title="数组操作符"></a>数组操作符</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 包含所有元素</span></span><br><span class="line">db.<span class="property">users</span>.<span class="title function_">find</span>(&#123;<span class="attr">hobbies</span>: &#123;<span class="attr">$all</span>: [<span class="string">&quot;读书&quot;</span>, <span class="string">&quot;游泳&quot;</span>]&#125;&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 包含任意元素</span></span><br><span class="line">db.<span class="property">users</span>.<span class="title function_">find</span>(&#123;<span class="attr">hobbies</span>: &#123;<span class="attr">$in</span>: [<span class="string">&quot;读书&quot;</span>]&#125;&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 数组大小</span></span><br><span class="line">db.<span class="property">users</span>.<span class="title function_">find</span>(&#123;<span class="attr">hobbies</span>: &#123;<span class="attr">$size</span>: <span class="number">3</span>&#125;&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 数组元素匹配</span></span><br><span class="line">db.<span class="property">users</span>.<span class="title function_">find</span>(&#123;<span class="string">&quot;hobbies.0&quot;</span>: <span class="string">&quot;读书&quot;</span>&#125;)</span><br></pre></td></tr></table></figure>

<h2 id="4-索引基础"><a href="#4-索引基础" class="headerlink" title="4. 索引基础"></a>4. 索引基础</h2><h3 id="索引的重要性"><a href="#索引的重要性" class="headerlink" title="索引的重要性"></a>索引的重要性</h3><ul>
<li><strong>提高查询性能</strong>：避免全集合扫描</li>
<li><strong>支持排序操作</strong>：避免内存排序</li>
<li><strong>唯一性约束</strong>：确保数据唯一性</li>
<li><strong>文本搜索</strong>：支持全文检索</li>
</ul>
<h3 id="创建单字段索引"><a href="#创建单字段索引" class="headerlink" title="创建单字段索引"></a>创建单字段索引</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 创建升序索引</span></span><br><span class="line">db.<span class="property">users</span>.<span class="title function_">createIndex</span>(&#123;<span class="attr">age</span>: <span class="number">1</span>&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 创建降序索引</span></span><br><span class="line">db.<span class="property">users</span>.<span class="title function_">createIndex</span>(&#123;<span class="attr">createdAt</span>: -<span class="number">1</span>&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 创建唯一索引</span></span><br><span class="line">db.<span class="property">users</span>.<span class="title function_">createIndex</span>(&#123;<span class="attr">email</span>: <span class="number">1</span>&#125;, &#123;<span class="attr">unique</span>: <span class="literal">true</span>&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 创建稀疏索引（只索引存在该字段的文档）</span></span><br><span class="line">db.<span class="property">users</span>.<span class="title function_">createIndex</span>(&#123;<span class="attr">phone</span>: <span class="number">1</span>&#125;, &#123;<span class="attr">sparse</span>: <span class="literal">true</span>&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 查看集合的索引</span></span><br><span class="line">db.<span class="property">users</span>.<span class="title function_">getIndexes</span>()</span><br><span class="line"></span><br><span class="line"><span class="comment">// 删除索引</span></span><br><span class="line">db.<span class="property">users</span>.<span class="title function_">dropIndex</span>(&#123;<span class="attr">age</span>: <span class="number">1</span>&#125;)</span><br></pre></td></tr></table></figure>

<h3 id="创建复合索引"><a href="#创建复合索引" class="headerlink" title="创建复合索引"></a>创建复合索引</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 创建复合索引</span></span><br><span class="line">db.<span class="property">users</span>.<span class="title function_">createIndex</span>(&#123;<span class="attr">age</span>: <span class="number">1</span>, <span class="attr">city</span>: <span class="number">1</span>&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 创建复合唯一索引</span></span><br><span class="line">db.<span class="property">users</span>.<span class="title function_">createIndex</span>(&#123;<span class="attr">username</span>: <span class="number">1</span>, <span class="attr">email</span>: <span class="number">1</span>&#125;, &#123;<span class="attr">unique</span>: <span class="literal">true</span>&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 复合索引的顺序很重要</span></span><br><span class="line"><span class="comment">// 查询 &#123;age: 25, city: &quot;北京&quot;&#125; 可以使用索引</span></span><br><span class="line"><span class="comment">// 查询 &#123;city: &quot;北京&quot;&#125; 不能有效使用索引</span></span><br></pre></td></tr></table></figure>

<h3 id="索引类型"><a href="#索引类型" class="headerlink" title="索引类型"></a>索引类型</h3><p>在MongoDB中，索引可以是升序（ascending）或降序（descending），这主要影响的是索引中数据的排序方式。尽管升序和降序索引在查询性能上对于单字段索引来说几乎没有差别，它们的区别主要体现在多字段索引以及排序操作中。</p>
<h3 id="单字段索引"><a href="#单字段索引" class="headerlink" title="单字段索引"></a>单字段索引</h3><ul>
<li><strong>升序索引</strong>：当你创建一个升序索引时，MongoDB会根据该字段的值从小到大对文档进行排序。</li>
<li><strong>降序索引</strong>：相反，如果你创建的是降序索引，那么MongoDB将按照该字段的值从大到小来对文档排序。</li>
</ul>
<p>对于单字段索引而言，升序和降序索引的实际查询效率几乎相同，因为MongoDB能够高效地遍历索引树，无论其顺序如何。</p>
<h3 id="多字段索引"><a href="#多字段索引" class="headerlink" title="多字段索引"></a>多字段索引</h3><p>当涉及到包含多个字段的复合索引时，升序和降序索引的选择变得更为重要，尤其是在执行需要对结果集进行排序的查询时：</p>
<ul>
<li><p>如果你的查询经常需要基于某些字段以特定顺序返回结果，那么正确设置每个字段的索引顺序（升序或降序）可以使MongoDB直接使用索引来满足排序需求，而无需执行额外的排序步骤。例如，如果一个查询通常要求按字段A降序然后按字段B升序排列结果，那么为字段A创建降序索引且为字段B创建升序索引可能会提高性能。</p>
</li>
<li><p>在某些情况下，特别是当查询条件与排序顺序相匹配时，正确的索引顺序可以帮助MongoDB更有效地执行查询，因为它可以直接“行走”索引来获取已排序的结果，而不是先获取所有符合条件的文档再进行排序。</p>
</li>
</ul>
<p>总之，在大多数情况下，对于单个字段的索引，选择升序还是降序并不会显著影响查询性能。然而，在设计复合索引时，考虑到查询中常用的排序模式，合理安排各个字段的索引顺序可以优化查询性能。</p>
<h4 id="1-单字段索引"><a href="#1-单字段索引" class="headerlink" title="1. 单字段索引"></a>1. 单字段索引</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 最常见的索引类型</span></span><br><span class="line">db.<span class="property">users</span>.<span class="title function_">createIndex</span>(&#123;<span class="attr">name</span>: <span class="number">1</span>&#125;)</span><br></pre></td></tr></table></figure>

<h4 id="2-复合索引"><a href="#2-复合索引" class="headerlink" title="2. 复合索引"></a>2. 复合索引</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 支持多字段查询</span></span><br><span class="line">db.<span class="property">users</span>.<span class="title function_">createIndex</span>(&#123;<span class="attr">lastName</span>: <span class="number">1</span>, <span class="attr">firstName</span>: <span class="number">1</span>&#125;)</span><br></pre></td></tr></table></figure>

<h4 id="3-多键索引（数组字段）"><a href="#3-多键索引（数组字段）" class="headerlink" title="3. 多键索引（数组字段）"></a>3. 多键索引（数组字段）</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 自动为数组字段创建</span></span><br><span class="line">db.<span class="property">users</span>.<span class="title function_">createIndex</span>(&#123;<span class="attr">tags</span>: <span class="number">1</span>&#125;)</span><br></pre></td></tr></table></figure>

<h4 id="4-地理空间索引"><a href="#4-地理空间索引" class="headerlink" title="4. 地理空间索引"></a>4. 地理空间索引</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 2dsphere 索引用于地理空间查询</span></span><br><span class="line">db.<span class="property">places</span>.<span class="title function_">createIndex</span>(&#123;<span class="attr">location</span>: <span class="string">&quot;2dsphere&quot;</span>&#125;)</span><br></pre></td></tr></table></figure>

<h4 id="5-文本索引"><a href="#5-文本索引" class="headerlink" title="5. 文本索引"></a>5. 文本索引</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 支持全文搜索</span></span><br><span class="line">db.<span class="property">articles</span>.<span class="title function_">createIndex</span>(&#123;<span class="attr">content</span>: <span class="string">&quot;text&quot;</span>&#125;)</span><br></pre></td></tr></table></figure>

<h4 id="6-哈希索引"><a href="#6-哈希索引" class="headerlink" title="6. 哈希索引"></a>6. 哈希索引</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 用于分片集群</span></span><br><span class="line">db.<span class="property">users</span>.<span class="title function_">createIndex</span>(&#123;<span class="attr">_id</span>: <span class="string">&quot;hashed&quot;</span>&#125;)</span><br></pre></td></tr></table></figure>

<h3 id="索引管理"><a href="#索引管理" class="headerlink" title="索引管理"></a>索引管理</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 查看索引使用情况</span></span><br><span class="line">db.<span class="property">users</span>.<span class="title function_">aggregate</span>([</span><br><span class="line">  &#123;<span class="attr">$indexStats</span>: &#123;&#125;&#125;</span><br><span class="line">])</span><br><span class="line"></span><br><span class="line"><span class="comment">// 查看查询计划</span></span><br><span class="line">db.<span class="property">users</span>.<span class="title function_">find</span>(&#123;<span class="attr">age</span>: <span class="number">25</span>&#125;).<span class="title function_">explain</span>(<span class="string">&quot;executionStats&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 后台创建索引（生产环境推荐）</span></span><br><span class="line">db.<span class="property">users</span>.<span class="title function_">createIndex</span>(&#123;<span class="attr">age</span>: <span class="number">1</span>&#125;, &#123;<span class="attr">background</span>: <span class="literal">true</span>&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 部分索引（只索引满足条件的文档）</span></span><br><span class="line">db.<span class="property">users</span>.<span class="title function_">createIndex</span>(</span><br><span class="line">  &#123;<span class="attr">age</span>: <span class="number">1</span>&#125;,</span><br><span class="line">  &#123;<span class="attr">partialFilterExpression</span>: &#123;<span class="attr">age</span>: &#123;<span class="attr">$gte</span>: <span class="number">18</span>&#125;&#125;&#125;</span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<h3 id="索引最佳实践"><a href="#索引最佳实践" class="headerlink" title="索引最佳实践"></a>索引最佳实践</h3><ol>
<li><strong>为查询条件创建索引</strong>：WHERE 子句中的字段</li>
<li><strong>为排序字段创建索引</strong>：ORDER BY 中的字段</li>
<li><strong>避免过多索引</strong>：每个索引都会占用存储空间和影响写入性能</li>
<li><strong>使用复合索引</strong>：减少索引数量，提高查询效率</li>
<li><strong>监控索引使用情况</strong>：删除未使用的索引</li>
</ol>
<h2 id="5-实践练习"><a href="#5-实践练习" class="headerlink" title="5. 实践练习"></a>5. 实践练习</h2><h3 id="练习1：用户管理系统"><a href="#练习1：用户管理系统" class="headerlink" title="练习1：用户管理系统"></a>练习1：用户管理系统</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 创建用户集合</span></span><br><span class="line">use userManagement</span><br><span class="line"></span><br><span class="line"><span class="comment">// 插入测试数据</span></span><br><span class="line">db.<span class="property">users</span>.<span class="title function_">insertMany</span>([</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&quot;张三&quot;</span>,</span><br><span class="line">    <span class="attr">age</span>: <span class="number">25</span>,</span><br><span class="line">    <span class="attr">email</span>: <span class="string">&quot;zhangsan@example.com&quot;</span>,</span><br><span class="line">    <span class="attr">city</span>: <span class="string">&quot;北京&quot;</span>,</span><br><span class="line">    <span class="attr">hobbies</span>: [<span class="string">&quot;读书&quot;</span>, <span class="string">&quot;游泳&quot;</span>],</span><br><span class="line">    <span class="attr">createdAt</span>: <span class="keyword">new</span> <span class="title class_">Date</span>()</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&quot;李四&quot;</span>,</span><br><span class="line">    <span class="attr">age</span>: <span class="number">30</span>,</span><br><span class="line">    <span class="attr">email</span>: <span class="string">&quot;lisi@example.com&quot;</span>,</span><br><span class="line">    <span class="attr">city</span>: <span class="string">&quot;上海&quot;</span>,</span><br><span class="line">    <span class="attr">hobbies</span>: [<span class="string">&quot;编程&quot;</span>, <span class="string">&quot;游戏&quot;</span>],</span><br><span class="line">    <span class="attr">createdAt</span>: <span class="keyword">new</span> <span class="title class_">Date</span>()</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&quot;王五&quot;</span>,</span><br><span class="line">    <span class="attr">age</span>: <span class="number">28</span>,</span><br><span class="line">    <span class="attr">email</span>: <span class="string">&quot;wangwu@example.com&quot;</span>,</span><br><span class="line">    <span class="attr">city</span>: <span class="string">&quot;广州&quot;</span>,</span><br><span class="line">    <span class="attr">hobbies</span>: [<span class="string">&quot;旅游&quot;</span>, <span class="string">&quot;摄影&quot;</span>],</span><br><span class="line">    <span class="attr">createdAt</span>: <span class="keyword">new</span> <span class="title class_">Date</span>()</span><br><span class="line">  &#125;</span><br><span class="line">])</span><br><span class="line"></span><br><span class="line"><span class="comment">// 创建索引</span></span><br><span class="line">db.<span class="property">users</span>.<span class="title function_">createIndex</span>(&#123;<span class="attr">email</span>: <span class="number">1</span>&#125;, &#123;<span class="attr">unique</span>: <span class="literal">true</span>&#125;)</span><br><span class="line">db.<span class="property">users</span>.<span class="title function_">createIndex</span>(&#123;<span class="attr">age</span>: <span class="number">1</span>, <span class="attr">city</span>: <span class="number">1</span>&#125;)</span><br><span class="line">db.<span class="property">users</span>.<span class="title function_">createIndex</span>(&#123;<span class="attr">createdAt</span>: -<span class="number">1</span>&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 查询练习</span></span><br><span class="line"><span class="comment">// 1. 查找年龄大于25岁的用户</span></span><br><span class="line">db.<span class="property">users</span>.<span class="title function_">find</span>(&#123;<span class="attr">age</span>: &#123;<span class="attr">$gt</span>: <span class="number">25</span>&#125;&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 2. 查找北京的年轻用户（年龄小于30）</span></span><br><span class="line">db.<span class="property">users</span>.<span class="title function_">find</span>(&#123;<span class="attr">city</span>: <span class="string">&quot;北京&quot;</span>, <span class="attr">age</span>: &#123;<span class="attr">$lt</span>: <span class="number">30</span>&#125;&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 3. 按年龄排序</span></span><br><span class="line">db.<span class="property">users</span>.<span class="title function_">find</span>().<span class="title function_">sort</span>(&#123;<span class="attr">age</span>: <span class="number">1</span>&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 4. 统计各城市的用户数量</span></span><br><span class="line">db.<span class="property">users</span>.<span class="title function_">aggregate</span>([</span><br><span class="line">  &#123;<span class="attr">$group</span>: &#123;<span class="attr">_id</span>: <span class="string">&quot;$city&quot;</span>, <span class="attr">count</span>: &#123;<span class="attr">$sum</span>: <span class="number">1</span>&#125;&#125;&#125;</span><br><span class="line">])</span><br></pre></td></tr></table></figure>

<h3 id="练习2：博客系统"><a href="#练习2：博客系统" class="headerlink" title="练习2：博客系统"></a>练习2：博客系统</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 创建博客集合</span></span><br><span class="line">use blogSystem</span><br><span class="line"></span><br><span class="line"><span class="comment">// 插入博客文章</span></span><br><span class="line">db.<span class="property">posts</span>.<span class="title function_">insertMany</span>([</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">title</span>: <span class="string">&quot;MongoDB 入门指南&quot;</span>,</span><br><span class="line">    <span class="attr">content</span>: <span class="string">&quot;MongoDB 是一个强大的 NoSQL 数据库...&quot;</span>,</span><br><span class="line">    <span class="attr">author</span>: <span class="string">&quot;张三&quot;</span>,</span><br><span class="line">    <span class="attr">tags</span>: [<span class="string">&quot;MongoDB&quot;</span>, <span class="string">&quot;数据库&quot;</span>, <span class="string">&quot;NoSQL&quot;</span>],</span><br><span class="line">    <span class="attr">publishedAt</span>: <span class="keyword">new</span> <span class="title class_">Date</span>(),</span><br><span class="line">    <span class="attr">views</span>: <span class="number">150</span>,</span><br><span class="line">    <span class="attr">likes</span>: <span class="number">25</span></span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">title</span>: <span class="string">&quot;Node.js 开发实践&quot;</span>,</span><br><span class="line">    <span class="attr">content</span>: <span class="string">&quot;Node.js 是一个基于 Chrome V8 引擎的 JavaScript 运行时...&quot;</span>,</span><br><span class="line">    <span class="attr">author</span>: <span class="string">&quot;李四&quot;</span>,</span><br><span class="line">    <span class="attr">tags</span>: [<span class="string">&quot;Node.js&quot;</span>, <span class="string">&quot;JavaScript&quot;</span>, <span class="string">&quot;后端&quot;</span>],</span><br><span class="line">    <span class="attr">publishedAt</span>: <span class="keyword">new</span> <span class="title class_">Date</span>(),</span><br><span class="line">    <span class="attr">views</span>: <span class="number">89</span>,</span><br><span class="line">    <span class="attr">likes</span>: <span class="number">12</span></span><br><span class="line">  &#125;</span><br><span class="line">])</span><br><span class="line"></span><br><span class="line"><span class="comment">// 创建索引</span></span><br><span class="line">db.<span class="property">posts</span>.<span class="title function_">createIndex</span>(&#123;<span class="attr">title</span>: <span class="string">&quot;text&quot;</span>, <span class="attr">content</span>: <span class="string">&quot;text&quot;</span>&#125;)</span><br><span class="line">db.<span class="property">posts</span>.<span class="title function_">createIndex</span>(&#123;<span class="attr">author</span>: <span class="number">1</span>&#125;)</span><br><span class="line">db.<span class="property">posts</span>.<span class="title function_">createIndex</span>(&#123;<span class="attr">publishedAt</span>: -<span class="number">1</span>&#125;)</span><br><span class="line">db.<span class="property">posts</span>.<span class="title function_">createIndex</span>(&#123;<span class="attr">views</span>: -<span class="number">1</span>&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 全文搜索</span></span><br><span class="line">db.<span class="property">posts</span>.<span class="title function_">find</span>(&#123;<span class="attr">$text</span>: &#123;<span class="attr">$search</span>: <span class="string">&quot;MongoDB&quot;</span>&#125;&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 热门文章（按浏览量排序）</span></span><br><span class="line">db.<span class="property">posts</span>.<span class="title function_">find</span>().<span class="title function_">sort</span>(&#123;<span class="attr">views</span>: -<span class="number">1</span>&#125;).<span class="title function_">limit</span>(<span class="number">5</span>)</span><br></pre></td></tr></table></figure>



<h3 id="常用资源"><a href="#常用资源" class="headerlink" title="常用资源"></a>常用资源</h3><ul>
<li><a target="_blank" rel="noopener" href="https://docs.mongodb.com/">MongoDB 官方文档</a></li>
<li><a target="_blank" rel="noopener" href="https://university.mongodb.com/">MongoDB 大学免费课程</a></li>
<li><a target="_blank" rel="noopener" href="https://community.mongodb.com/">MongoDB 社区论坛</a></li>
</ul>
<hr>
</article><div class="post-copyright"><div class="copyright-cc-box"><i class="anzhiyufont anzhiyu-icon-copyright"></i></div><div class="post-copyright__author_box"><a class="post-copyright__author_img" href="/" title="头像"><img class="post-copyright__author_img_back" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://img.picgo.net/2025/06/23/tom09183405464859c2.jpg" title="头像" alt="头像"><img class="post-copyright__author_img_front" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://img.picgo.net/2025/06/23/tom09183405464859c2.jpg" title="头像" alt="头像"></a><div class="post-copyright__author_name">Joie</div><div class="post-copyright__author_desc"></div></div><div class="post-copyright__post__info"><a class="post-copyright__original" title="该文章为原创文章，注意版权协议" href="http://example.com/2025/08/10/MongoDB%E5%9F%BA%E7%A1%80/">原创</a><a class="post-copyright-title"><span onclick="rm.copyPageUrl('http://example.com/2025/08/10/MongoDB%E5%9F%BA%E7%A1%80/')">MongoDB基础</span></a></div><div class="post-tools" id="post-tools"><div class="post-tools-left"><div class="rewardLeftButton"></div><div class="shareRight"><div class="share-link mobile"><div class="share-qrcode"><div class="share-button" title="使用手机访问这篇文章"><i class="anzhiyufont anzhiyu-icon-qrcode"></i></div><div class="share-main"><div class="share-main-all"><div id="qrcode" title="http://example.com/2025/08/10/MongoDB%E5%9F%BA%E7%A1%80/"></div><div class="reward-dec">使用手机访问这篇文章</div></div></div></div></div><div class="share-link weibo"><a class="share-button" target="_blank" href="https://service.weibo.com/share/share.php?title=MongoDB基础&amp;url=http://example.com/2025/08/10/MongoDB%E5%9F%BA%E7%A1%80/&amp;pic=https://origin.picgo.net/2025/08/10/mongo767c67668fc74417.png" rel="external nofollow noreferrer noopener"><i class="anzhiyufont anzhiyu-icon-weibo"></i></a></div><script>function copyCurrentPageUrl() {
  var currentPageUrl = window.location.href;
  var input = document.createElement("input");
  input.setAttribute("value", currentPageUrl);
  document.body.appendChild(input);
  input.select();
  input.setSelectionRange(0, 99999);
  document.execCommand("copy");
  document.body.removeChild(input);
}</script><div class="share-link copyurl"><div class="share-button" id="post-share-url" title="复制链接" onclick="copyCurrentPageUrl()"><i class="anzhiyufont anzhiyu-icon-link"></i></div></div></div></div></div><div class="post-copyright__notice"><span class="post-copyright-info">All articles in this blog are licensed under <a target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> unless stating additionally.</span></div></div><div class="post-tools-right"><div class="tag_share"><div class="post-meta__box"><div class="post-meta__box__tag-list"><a class="post-meta__box__tags" href="/tags/MongoDB/"><span class="tags-punctuation"> <i class="anzhiyufont anzhiyu-icon-tag"></i></span>MongoDB<span class="tagsPageCount">1</span></a></div></div></div><div class="post_share"><div class="social-share" data-image="https://origin.picgo.net/2025/08/21/MyBatis-144f9929151758527.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.cbd.int/butterfly-extsrc@1.1.3/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"/><script src="https://cdn.cbd.int/butterfly-extsrc@1.1.3/sharejs/dist/js/social-share.min.js" defer="defer"></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2025/08/08/ElasticSearch%E6%9F%A5%E8%AF%A2/"><img class="prev-cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://origin.picgo.net/2025/08/08/2738901-20230326221925205-10674419245f2fcf4ef2c78d84.png" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">Previous Post</div><div class="prev_info">ElasticSearch查询</div></div></a></div><div class="next-post pull-right"><a href="/2025/08/10/SpringDataMongoDB/"><img class="next-cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://origin.picgo.net/2025/08/10/mongo767c67668fc74417.png" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">Next Post</div><div class="next_info">Spring Data MongoDB 完整指南</div></div></a></div></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="card-content"><div class="author-info__sayhi" id="author-info__sayhi" onclick="anzhiyu.changeSayHelloText()"></div><div class="author-info-avatar"><img class="avatar-img" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://img.picgo.net/2025/06/23/tom09183405464859c2.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__description"><div style="line-height:1.38;margin:0.6rem 0;text-align:justify;color:rgba(255, 255, 255, 0.8);">这有关于<b style="color:#fff">产品、设计、开发</b>相关的问题和看法，还有<b style="color:#fff">文章翻译</b>和<b style="color:#fff">分享</b>。</div><div style="line-height:1.38;margin:0.6rem 0;text-align:justify;color:rgba(255, 255, 255, 0.8);">相信你可以在这里找到对你有用的<b style="color:#fff">知识</b>和<b style="color:#fff">教程</b>。</div></div><div class="author-info__bottom-group"><a class="author-info__bottom-group-left" href="/"><h1 class="author-info__name">Joie</h1><div class="author-info__desc"></div></a><div class="card-info-social-icons is-center"><a class="social-icon faa-parent animated-hover" href="https://github.com/BenedictTom" target="_blank" title="Github"><i class="anzhiyufont anzhiyu-icon-github"></i></a><a class="social-icon faa-parent animated-hover" href="https://space.bilibili.com/372204786" target="_blank" title="BiliBili"><i class="anzhiyufont anzhiyu-icon-bilibili"></i></a></div></div></div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-bars"></i><span>Catalog</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#MongoDB-%E5%9F%BA%E7%A1%80%E5%85%A5%E9%97%A8"><span class="toc-number">1.</span> <span class="toc-text">MongoDB 基础入门</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%98%B6%E6%AE%B5%E4%B8%80%EF%BC%9AMongoDB-%E5%9F%BA%E7%A1%80%E5%85%A5%E9%97%A8"><span class="toc-number">1.1.</span> <span class="toc-text">阶段一：MongoDB 基础入门</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-%E4%BA%86%E8%A7%A3-NoSQL-%E4%B8%8E-MongoDB"><span class="toc-number">1.2.</span> <span class="toc-text">1. 了解 NoSQL 与 MongoDB</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%80%E4%B9%88%E6%98%AF-NoSQL%EF%BC%9F"><span class="toc-number">1.2.1.</span> <span class="toc-text">什么是 NoSQL？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#MongoDB-%E7%9A%84%E7%89%B9%E7%82%B9"><span class="toc-number">1.2.2.</span> <span class="toc-text">MongoDB 的特点</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E6%96%87%E6%A1%A3%E6%A8%A1%E5%9E%8B"><span class="toc-number">1.2.2.1.</span> <span class="toc-text">1. 文档模型</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-%E9%AB%98%E5%8F%AF%E7%94%A8%E6%80%A7"><span class="toc-number">1.2.2.2.</span> <span class="toc-text">2. 高可用性</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-%E6%B0%B4%E5%B9%B3%E6%89%A9%E5%B1%95"><span class="toc-number">1.2.2.3.</span> <span class="toc-text">3. 水平扩展</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-%E7%81%B5%E6%B4%BB%E6%A8%A1%E5%BC%8F"><span class="toc-number">1.2.2.4.</span> <span class="toc-text">4. 灵活模式</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%80%82%E7%94%A8%E5%9C%BA%E6%99%AF"><span class="toc-number">1.2.3.</span> <span class="toc-text">适用场景</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-%E5%AE%89%E8%A3%85%E4%B8%8E%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA"><span class="toc-number">1.3.</span> <span class="toc-text">2. 安装与环境搭建</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9C%AC%E5%9C%B0%E5%AE%89%E8%A3%85-MongoDB-Community-Server"><span class="toc-number">1.3.1.</span> <span class="toc-text">本地安装 MongoDB Community Server</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Windows-%E5%AE%89%E8%A3%85"><span class="toc-number">1.3.1.1.</span> <span class="toc-text">Windows 安装</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#macOS-%E5%AE%89%E8%A3%85"><span class="toc-number">1.3.1.2.</span> <span class="toc-text">macOS 安装</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Linux-%E5%AE%89%E8%A3%85"><span class="toc-number">1.3.1.3.</span> <span class="toc-text">Linux 安装</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8-MongoDB-Atlas%EF%BC%88%E4%BA%91%E6%9C%8D%E5%8A%A1%EF%BC%89"><span class="toc-number">1.3.2.</span> <span class="toc-text">使用 MongoDB Atlas（云服务）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%89%E8%A3%85-MongoDB-Compass%EF%BC%88%E5%8F%AF%E8%A7%86%E5%8C%96%E5%B7%A5%E5%85%B7%EF%BC%89"><span class="toc-number">1.3.3.</span> <span class="toc-text">安装 MongoDB Compass（可视化工具）</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-%E5%9F%BA%E7%A1%80%E6%93%8D%E4%BD%9C"><span class="toc-number">1.4.</span> <span class="toc-text">3. 基础操作</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B"><span class="toc-number">1.4.1.</span> <span class="toc-text">数据类型</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E5%BA%93%E3%80%81%E9%9B%86%E5%90%88%E3%80%81%E6%96%87%E6%A1%A3%E7%9A%84%E6%A6%82%E5%BF%B5"><span class="toc-number">1.4.2.</span> <span class="toc-text">数据库、集合、文档的概念</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E5%BA%93%EF%BC%88Database%EF%BC%89"><span class="toc-number">1.4.2.1.</span> <span class="toc-text">数据库（Database）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%9B%86%E5%90%88%EF%BC%88Collection%EF%BC%89"><span class="toc-number">1.4.2.2.</span> <span class="toc-text">集合（Collection）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%96%87%E6%A1%A3%EF%BC%88Document%EF%BC%89"><span class="toc-number">1.4.2.3.</span> <span class="toc-text">文档（Document）</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#CRUD-%E6%93%8D%E4%BD%9C"><span class="toc-number">1.4.3.</span> <span class="toc-text">CRUD 操作</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%EF%BC%88Create%EF%BC%89"><span class="toc-number">1.4.3.1.</span> <span class="toc-text">创建（Create）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%AF%BB%E5%8F%96%EF%BC%88Read%EF%BC%89"><span class="toc-number">1.4.3.2.</span> <span class="toc-text">读取（Read）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9B%B4%E6%96%B0%EF%BC%88Update%EF%BC%89"><span class="toc-number">1.4.3.3.</span> <span class="toc-text">更新（Update）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%88%A0%E9%99%A4%EF%BC%88Delete%EF%BC%89"><span class="toc-number">1.4.3.4.</span> <span class="toc-text">删除（Delete）</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9F%A5%E8%AF%A2%E6%93%8D%E4%BD%9C%E7%AC%A6"><span class="toc-number">1.4.4.</span> <span class="toc-text">查询操作符</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%AF%94%E8%BE%83%E6%93%8D%E4%BD%9C%E7%AC%A6"><span class="toc-number">1.4.4.1.</span> <span class="toc-text">比较操作符</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%80%BB%E8%BE%91%E6%93%8D%E4%BD%9C%E7%AC%A6"><span class="toc-number">1.4.4.2.</span> <span class="toc-text">逻辑操作符</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%85%83%E7%B4%A0%E6%93%8D%E4%BD%9C%E7%AC%A6"><span class="toc-number">1.4.4.3.</span> <span class="toc-text">元素操作符</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%95%B0%E7%BB%84%E6%93%8D%E4%BD%9C%E7%AC%A6"><span class="toc-number">1.4.4.4.</span> <span class="toc-text">数组操作符</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-%E7%B4%A2%E5%BC%95%E5%9F%BA%E7%A1%80"><span class="toc-number">1.5.</span> <span class="toc-text">4. 索引基础</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%B4%A2%E5%BC%95%E7%9A%84%E9%87%8D%E8%A6%81%E6%80%A7"><span class="toc-number">1.5.1.</span> <span class="toc-text">索引的重要性</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E5%8D%95%E5%AD%97%E6%AE%B5%E7%B4%A2%E5%BC%95"><span class="toc-number">1.5.2.</span> <span class="toc-text">创建单字段索引</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E5%A4%8D%E5%90%88%E7%B4%A2%E5%BC%95"><span class="toc-number">1.5.3.</span> <span class="toc-text">创建复合索引</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%B4%A2%E5%BC%95%E7%B1%BB%E5%9E%8B"><span class="toc-number">1.5.4.</span> <span class="toc-text">索引类型</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8D%95%E5%AD%97%E6%AE%B5%E7%B4%A2%E5%BC%95"><span class="toc-number">1.5.5.</span> <span class="toc-text">单字段索引</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A4%9A%E5%AD%97%E6%AE%B5%E7%B4%A2%E5%BC%95"><span class="toc-number">1.5.6.</span> <span class="toc-text">多字段索引</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E5%8D%95%E5%AD%97%E6%AE%B5%E7%B4%A2%E5%BC%95"><span class="toc-number">1.5.6.1.</span> <span class="toc-text">1. 单字段索引</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-%E5%A4%8D%E5%90%88%E7%B4%A2%E5%BC%95"><span class="toc-number">1.5.6.2.</span> <span class="toc-text">2. 复合索引</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-%E5%A4%9A%E9%94%AE%E7%B4%A2%E5%BC%95%EF%BC%88%E6%95%B0%E7%BB%84%E5%AD%97%E6%AE%B5%EF%BC%89"><span class="toc-number">1.5.6.3.</span> <span class="toc-text">3. 多键索引（数组字段）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-%E5%9C%B0%E7%90%86%E7%A9%BA%E9%97%B4%E7%B4%A2%E5%BC%95"><span class="toc-number">1.5.6.4.</span> <span class="toc-text">4. 地理空间索引</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-%E6%96%87%E6%9C%AC%E7%B4%A2%E5%BC%95"><span class="toc-number">1.5.6.5.</span> <span class="toc-text">5. 文本索引</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6-%E5%93%88%E5%B8%8C%E7%B4%A2%E5%BC%95"><span class="toc-number">1.5.6.6.</span> <span class="toc-text">6. 哈希索引</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%B4%A2%E5%BC%95%E7%AE%A1%E7%90%86"><span class="toc-number">1.5.7.</span> <span class="toc-text">索引管理</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%B4%A2%E5%BC%95%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5"><span class="toc-number">1.5.8.</span> <span class="toc-text">索引最佳实践</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-%E5%AE%9E%E8%B7%B5%E7%BB%83%E4%B9%A0"><span class="toc-number">1.6.</span> <span class="toc-text">5. 实践练习</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BB%83%E4%B9%A01%EF%BC%9A%E7%94%A8%E6%88%B7%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F"><span class="toc-number">1.6.1.</span> <span class="toc-text">练习1：用户管理系统</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BB%83%E4%B9%A02%EF%BC%9A%E5%8D%9A%E5%AE%A2%E7%B3%BB%E7%BB%9F"><span class="toc-number">1.6.2.</span> <span class="toc-text">练习2：博客系统</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B8%B8%E7%94%A8%E8%B5%84%E6%BA%90"><span class="toc-number">1.6.3.</span> <span class="toc-text">常用资源</span></a></li></ol></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-history"></i><span>Recent Post</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2025/08/21/mybatis%E7%BC%93%E5%AD%98%E8%AF%A6%E8%A7%A3/" title="Mybatis缓存详解"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://origin.picgo.net/2025/08/21/MyBatis-144f9929151758527.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Mybatis缓存详解"/></a><div class="content"><a class="title" href="/2025/08/21/mybatis%E7%BC%93%E5%AD%98%E8%AF%A6%E8%A7%A3/" title="Mybatis缓存详解">Mybatis缓存详解</a><time datetime="2025-08-21T09:49:57.350Z" title="Created 2025-08-21 17:49:57">2025-08-21</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2025/08/20/%E9%9D%A2%E8%AF%95_8_20/" title="面试_8_20"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://origin.picgo.net/2025/08/07/202012111639381648986755c150cff23.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="面试_8_20"/></a><div class="content"><a class="title" href="/2025/08/20/%E9%9D%A2%E8%AF%95_8_20/" title="面试_8_20">面试_8_20</a><time datetime="2025-08-20T08:58:28.187Z" title="Created 2025-08-20 16:58:28">2025-08-20</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2025/08/19/Spring_IOC/" title="Spring IOC"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://origin.picgo.net/2025/08/21/Springca9e2519d2cfda6d.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Spring IOC"/></a><div class="content"><a class="title" href="/2025/08/19/Spring_IOC/" title="Spring IOC">Spring IOC</a><time datetime="2025-08-19T07:56:16.141Z" title="Created 2025-08-19 15:56:16">2025-08-19</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2025/08/19/%E9%9D%A2%E8%AF%95_%E6%BB%B4%E6%BB%B4/" title="面试_滴滴"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://origin.picgo.net/2025/08/07/202012111639381648986755c150cff23.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="面试_滴滴"/></a><div class="content"><a class="title" href="/2025/08/19/%E9%9D%A2%E8%AF%95_%E6%BB%B4%E6%BB%B4/" title="面试_滴滴">面试_滴滴</a><time datetime="2025-08-19T03:50:02.090Z" title="Created 2025-08-19 11:50:02">2025-08-19</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2025/08/18/%E5%B9%B6%E5%8F%91_io%E5%A4%9A%E8%B7%AF%E5%A4%8D%E7%94%A8/" title="I/O多路复用"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://origin.picgo.net/2025/08/18/netty99741d1acc3d52a8.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="I/O多路复用"/></a><div class="content"><a class="title" href="/2025/08/18/%E5%B9%B6%E5%8F%91_io%E5%A4%9A%E8%B7%AF%E5%A4%8D%E7%94%A8/" title="I/O多路复用">I/O多路复用</a><time datetime="2025-08-18T09:41:03.662Z" title="Created 2025-08-18 17:41:03">2025-08-18</time></div></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div id="workboard"><div id="runtimeTextTip"></div></div><p id="ghbdages"><a class="github-badge" target="_blank" href="https://hexo.io/" style="margin-inline:5px" data-title="博客框架为Hexo_v5.4.0" title="博客框架为Hexo_v5.4.0"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://npm.elemecdn.com/anzhiyu-blog@2.1.5/img/badge/Frame-Hexo.svg" alt="博客框架为Hexo_v5.4.0"/></a><a class="github-badge" target="_blank" href="https://blog.anheyu.com/" style="margin-inline:5px" data-title="本站使用AnZhiYu主题" title="本站使用AnZhiYu主题"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://npm.elemecdn.com/anzhiyu-theme-static@1.0.9/img/Theme-AnZhiYu-2E67D3.svg" alt="本站使用AnZhiYu主题"/></a></p></div><div id="footer-bar"><div class="footer-bar-links"><div class="footer-bar-left"><div id="footer-bar-tips"><div class="copyright">&copy;2025 By <a class="footer-bar-link" href="/" title="Joie" target="_blank">Joie</a></div></div><div id="footer-type-tips"></div><div class="js-pjax"><script>function subtitleType () {
  fetch('https://v1.hitokoto.cn')
    .then(response => response.json())
    .then(data => {
      if (true) {
        const from = '出自 ' + data.from
        const sub = []
        sub.unshift(data.hitokoto, from)
        window.typed = new Typed('#footer-type-tips', {
          strings: sub,
          startDelay: 300,
          typeSpeed: 150,
          loop: true,
          backSpeed: 50,
        })
      } else {
        document.getElementById('footer-type-tips').innerHTML = data.hitokoto
      }
    })
}

if (true) {
  if (typeof Typed === 'function') {
    subtitleType()
  } else {
    getScript('https://cdn.cbd.int/typed.js@2.1.0/dist/typed.umd.js').then(subtitleType)
  }
} else {
  subtitleType()
}
</script></div></div><div class="footer-bar-right"><a class="footer-bar-link" target="_blank" rel="noopener" href="https://github.com/anzhiyu-c/hexo-theme-anzhiyu" title="主题">主题</a></div></div></div></footer></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="sidebar-site-data site-data is-center"><a href="/archives/" title="archive"><div class="headline">Articles</div><div class="length-num">74</div></a><a href="/tags/" title="tag"><div class="headline">Tags</div><div class="length-num">35</div></a><a href="/categories/" title="category"><div class="headline">Categories</div><div class="length-num">25</div></a></div><span class="sidebar-menu-item-title">Function</span><div class="sidebar-menu-item"><a class="darkmode_switchbutton menu-child" href="javascript:void(0);" title="Display Mode"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i><span>Display Mode</span></a></div><div class="back-menu-list-groups"><div class="back-menu-list-group"><div class="back-menu-list-title">个人主页</div><div class="back-menu-list"><a class="back-menu-item" target="_blank" rel="noopener" href="https://benedicttom.github.io/home/" title="个人主页"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/favicon.ico" alt="个人主页"/><span class="back-menu-item-text">个人主页</span></a></div></div></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 文章</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/archives/"><i class="anzhiyufont anzhiyu-icon-box-archive faa-tada" style="font-size: 0.9em;"></i><span> 隧道</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/categories/"><i class="anzhiyufont anzhiyu-icon-shapes faa-tada" style="font-size: 0.9em;"></i><span> 分类</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/tags/"><i class="anzhiyufont anzhiyu-icon-tags faa-tada" style="font-size: 0.9em;"></i><span> 标签</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 友链</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/link/"><i class="anzhiyufont anzhiyu-icon-link faa-tada" style="font-size: 0.9em;"></i><span> 友人帐</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/comments/"><i class="anzhiyufont anzhiyu-icon-envelope faa-tada" style="font-size: 0.9em;"></i><span> 留言板</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 我的</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/music/"><i class="anzhiyufont anzhiyu-icon-music faa-tada" style="font-size: 0.9em;"></i><span> 音乐馆</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/album/"><i class="anzhiyufont anzhiyu-icon-images faa-tada" style="font-size: 0.9em;"></i><span> 相册集</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 关于</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/about/"><i class="anzhiyufont anzhiyu-icon-paper-plane faa-tada" style="font-size: 0.9em;"></i><span> 关于本人</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/essay/"><i class="anzhiyufont anzhiyu-icon-lightbulb faa-tada" style="font-size: 0.9em;"></i><span> 闲言碎语</span></a></li><li><a class="site-page child faa-parent animated-hover" href="javascript:toRandomPost()"><i class="anzhiyufont anzhiyu-icon-shoe-prints1 faa-tada" style="font-size: 0.9em;"></i><span> 随便逛逛</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/equipment/"><i class="anzhiyufont anzhiyu-icon-dice-d20 faa-tada" style="font-size: 0.9em;"></i><span> 我的装备</span></a></li></ul></div></div><span class="sidebar-menu-item-title">标签</span><div class="card-tags"><div class="item-headline"></div><div class="card-tag-cloud"><a href="/tags/AMQP/" style="font-size: 0.88rem;">AMQP<sup>1</sup></a><a href="/tags/CI-CD/" style="font-size: 0.88rem;">CI/CD<sup>1</sup></a><a href="/tags/ElasticSearch/" style="font-size: 0.88rem;">ElasticSearch<sup>3</sup></a><a href="/tags/Hexo/" style="font-size: 0.88rem;">Hexo<sup>1</sup></a><a href="/tags/Http/" style="font-size: 0.88rem;">Http<sup>2</sup></a><a href="/tags/I-O/" style="font-size: 0.88rem;">I/O<sup>2</sup></a><a href="/tags/Java/" style="font-size: 0.88rem;">Java<sup>6</sup></a><a href="/tags/MongoDB/" style="font-size: 0.88rem;">MongoDB<sup>1</sup></a><a href="/tags/Mysql/" style="font-size: 0.88rem;">Mysql<sup>2</sup></a><a href="/tags/ORM/" style="font-size: 0.88rem;">ORM<sup>3</sup></a><a href="/tags/Python/" style="font-size: 0.88rem;">Python<sup>3</sup></a><a href="/tags/Redis/" style="font-size: 0.88rem;">Redis<sup>5</sup></a><a href="/tags/Rpc/" style="font-size: 0.88rem;">Rpc<sup>2</sup></a><a href="/tags/Spring/" style="font-size: 0.88rem;">Spring<sup>1</sup></a><a href="/tags/Spring-Cloud/" style="font-size: 0.88rem;">Spring Cloud<sup>3</sup></a><a href="/tags/Spring-Data/" style="font-size: 0.88rem;">Spring Data<sup>5</sup></a><a href="/tags/Swagger/" style="font-size: 0.88rem;">Swagger<sup>1</sup></a><a href="/tags/%E4%BA%91%E5%8E%9F%E7%94%9F/" style="font-size: 0.88rem;">云原生<sup>1</sup></a><a href="/tags/%E5%85%AB%E8%82%A1/" style="font-size: 0.88rem;">八股<sup>1</sup></a><a href="/tags/%E5%8A%9B%E6%89%A3/" style="font-size: 0.88rem;">力扣<sup>10</sup></a><a href="/tags/%E5%A4%9A%E7%BA%BF%E7%A8%8B/" style="font-size: 0.88rem;">多线程<sup>7</sup></a><a href="/tags/%E5%AE%9A%E6%97%B6%E4%BB%BB%E5%8A%A1/" style="font-size: 0.88rem;">定时任务<sup>3</sup></a><a href="/tags/%E5%B9%B6%E5%8F%91/" style="font-size: 0.88rem;">并发<sup>7</sup></a><a href="/tags/%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/" style="font-size: 0.88rem;">开发工具<sup>2</sup></a><a href="/tags/%E6%8E%A8%E8%8D%90/" style="font-size: 0.88rem;">推荐<sup>1</sup></a><a href="/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/" style="font-size: 0.88rem;">数据结构<sup>4</sup></a><a href="/tags/%E6%9D%83%E9%99%90%E6%A0%A1%E9%AA%8C/" style="font-size: 0.88rem;">权限校验<sup>3</sup></a><a href="/tags/%E6%9E%B6%E6%9E%84/" style="font-size: 0.88rem;">架构<sup>1</sup></a><a href="/tags/%E6%A0%91/" style="font-size: 0.88rem;">树<sup>1</sup></a><a href="/tags/%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97/" style="font-size: 0.88rem;">消息队列<sup>4</sup></a><a href="/tags/%E7%AE%97%E6%B3%95/" style="font-size: 0.88rem;">算法<sup>1</sup></a><a href="/tags/%E7%BC%93%E5%AD%98/" style="font-size: 0.88rem;">缓存<sup>2</sup></a><a href="/tags/%E8%BF%90%E7%BB%B4/" style="font-size: 0.88rem;">运维<sup>2</sup></a><a href="/tags/%E9%9B%86%E5%90%88/" style="font-size: 0.88rem;">集合<sup>1</sup></a><a href="/tags/%E9%9D%A2%E8%AF%95/" style="font-size: 0.88rem;">面试<sup>3</sup></a></div></div><hr/></div></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="Read Mode"><i class="anzhiyufont anzhiyu-icon-book-open"></i></button><button id="translateLink" type="button" title="Switch Between Traditional Chinese And Simplified Chinese">繁</button><button id="darkmode" type="button" title="Switch Between Light And Dark Mode"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i></button><button id="hide-aside-btn" type="button" title="Toggle between single-column and double-column"><i class="anzhiyufont anzhiyu-icon-arrows-left-right"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="Setting"><i class="anzhiyufont anzhiyu-icon-gear"></i></button><button class="close" id="mobile-toc-button" type="button" title="Table Of Contents"><i class="anzhiyufont anzhiyu-icon-list-ul"></i></button><button id="go-up" type="button" title="Back To Top"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i></button></div></div><div id="nav-music"><a id="nav-music-hoverTips" onclick="anzhiyu.musicToggle()" accesskey="m">播放音乐</a><div id="console-music-bg"></div><meting-js id="8152976493" server="netease" type="playlist" mutex="true" preload="none" theme="var(--anzhiyu-main)" data-lrctype="0" order="random" volume="0.7"></meting-js></div><div id="rightMenu"><div class="rightMenu-group rightMenu-small"><div class="rightMenu-item" id="menu-backward"><i class="anzhiyufont anzhiyu-icon-arrow-left"></i></div><div class="rightMenu-item" id="menu-forward"><i class="anzhiyufont anzhiyu-icon-arrow-right"></i></div><div class="rightMenu-item" id="menu-refresh"><i class="anzhiyufont anzhiyu-icon-arrow-rotate-right" style="font-size: 1rem;"></i></div><div class="rightMenu-item" id="menu-top"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i></div></div><div class="rightMenu-group rightMenu-line rightMenuPlugin"><div class="rightMenu-item" id="menu-copytext"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制选中文本</span></div><div class="rightMenu-item" id="menu-pastetext"><i class="anzhiyufont anzhiyu-icon-paste"></i><span>粘贴文本</span></div><a class="rightMenu-item" id="menu-commenttext"><i class="anzhiyufont anzhiyu-icon-comment-medical"></i><span>引用到评论</span></a><div class="rightMenu-item" id="menu-newwindow"><i class="anzhiyufont anzhiyu-icon-window-restore"></i><span>新窗口打开</span></div><div class="rightMenu-item" id="menu-copylink"><i class="anzhiyufont anzhiyu-icon-link"></i><span>复制链接地址</span></div><div class="rightMenu-item" id="menu-copyimg"><i class="anzhiyufont anzhiyu-icon-images"></i><span>复制此图片</span></div><div class="rightMenu-item" id="menu-downloadimg"><i class="anzhiyufont anzhiyu-icon-download"></i><span>下载此图片</span></div><div class="rightMenu-item" id="menu-newwindowimg"><i class="anzhiyufont anzhiyu-icon-window-restore"></i><span>新窗口打开图片</span></div><div class="rightMenu-item" id="menu-search"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span>站内搜索</span></div><div class="rightMenu-item" id="menu-searchBaidu"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span>百度搜索</span></div><div class="rightMenu-item" id="menu-music-toggle"><i class="anzhiyufont anzhiyu-icon-play"></i><span>播放音乐</span></div><div class="rightMenu-item" id="menu-music-back"><i class="anzhiyufont anzhiyu-icon-backward"></i><span>切换到上一首</span></div><div class="rightMenu-item" id="menu-music-forward"><i class="anzhiyufont anzhiyu-icon-forward"></i><span>切换到下一首</span></div><div class="rightMenu-item" id="menu-music-playlist" onclick="window.open(&quot;https://y.qq.com/n/ryqq/playlist/8802438608&quot;, &quot;_blank&quot;);" style="display: none;"><i class="anzhiyufont anzhiyu-icon-radio"></i><span>查看所有歌曲</span></div><div class="rightMenu-item" id="menu-music-copyMusicName"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制歌名</span></div></div><div class="rightMenu-group rightMenu-line rightMenuOther"><a class="rightMenu-item menu-link" id="menu-randomPost"><i class="anzhiyufont anzhiyu-icon-shuffle"></i><span>随便逛逛</span></a><a class="rightMenu-item menu-link" href="/categories/"><i class="anzhiyufont anzhiyu-icon-cube"></i><span>博客分类</span></a><a class="rightMenu-item menu-link" href="/tags/"><i class="anzhiyufont anzhiyu-icon-tags"></i><span>文章标签</span></a></div><div class="rightMenu-group rightMenu-line rightMenuOther"><a class="rightMenu-item" id="menu-copy" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制地址</span></a><a class="rightMenu-item" id="menu-commentBarrage" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-message"></i><span class="menu-commentBarrage-text">关闭热评</span></a><a class="rightMenu-item" id="menu-darkmode" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i><span class="menu-darkmode-text">深色模式</span></a><a class="rightMenu-item" id="menu-translate" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-language"></i><span>轉為繁體</span></a></div></div><div id="rightmenu-mask"></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.cbd.int/@fancyapps/ui@5.0.28/dist/fancybox/fancybox.umd.js"></script><script src="https://cdn.cbd.int/instant.page@5.2.0/instantpage.js" type="module"></script><script src="https://cdn.cbd.int/vanilla-lazyload@17.8.5/dist/lazyload.iife.min.js"></script><script src="https://cdn.cbd.int/node-snackbar@0.1.16/dist/snackbar.min.js"></script><canvas id="universe"></canvas><script async src="https://npm.elemecdn.com/anzhiyu-theme-static@1.0.0/dark/dark.js"></script><script>// 消除控制台打印
var HoldLog = console.log;
console.log = function () {};
let now1 = new Date();
queueMicrotask(() => {
  const Log = function () {
    HoldLog.apply(console, arguments);
  }; //在恢复前输出日志
  const grt = new Date("04/01/2025 00:00:00"); //此处修改你的建站时间或者网站上线时间
  now1.setTime(now1.getTime() + 250);
  const days = (now1 - grt) / 1000 / 60 / 60 / 24;
  const dnum = Math.floor(days);
  const ascll = [
    `欢迎使用安知鱼!`,
    `生活明朗, 万物可爱`,
    `
        
       █████╗ ███╗   ██╗███████╗██╗  ██╗██╗██╗   ██╗██╗   ██╗
      ██╔══██╗████╗  ██║╚══███╔╝██║  ██║██║╚██╗ ██╔╝██║   ██║
      ███████║██╔██╗ ██║  ███╔╝ ███████║██║ ╚████╔╝ ██║   ██║
      ██╔══██║██║╚██╗██║ ███╔╝  ██╔══██║██║  ╚██╔╝  ██║   ██║
      ██║  ██║██║ ╚████║███████╗██║  ██║██║   ██║   ╚██████╔╝
      ╚═╝  ╚═╝╚═╝  ╚═══╝╚══════╝╚═╝  ╚═╝╚═╝   ╚═╝    ╚═════╝
        
        `,
    "已上线",
    dnum,
    "天",
    "©2025 By 安知鱼 V1.6.14",
  ];
  const ascll2 = [`NCC2-036`, `调用前置摄像头拍照成功，识别为【小笨蛋】.`, `Photo captured: `, `🤪`];

  setTimeout(
    Log.bind(
      console,
      `\n%c${ascll[0]} %c ${ascll[1]} %c ${ascll[2]} %c${ascll[3]}%c ${ascll[4]}%c ${ascll[5]}\n\n%c ${ascll[6]}\n`,
      "color:#425AEF",
      "",
      "color:#425AEF",
      "color:#425AEF",
      "",
      "color:#425AEF",
      ""
    )
  );
  setTimeout(
    Log.bind(
      console,
      `%c ${ascll2[0]} %c ${ascll2[1]} %c \n${ascll2[2]} %c\n${ascll2[3]}\n`,
      "color:white; background-color:#4fd953",
      "",
      "",
      'background:url("https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/tinggge.gif") no-repeat;font-size:450%'
    )
  );

  setTimeout(Log.bind(console, "%c WELCOME %c 你好，小笨蛋.", "color:white; background-color:#4f90d9", ""));

  setTimeout(
    console.warn.bind(
      console,
      "%c ⚡ Powered by 安知鱼 %c 你正在访问 Joie 的博客.",
      "color:white; background-color:#f0ad4e",
      ""
    )
  );

  setTimeout(Log.bind(console, "%c W23-12 %c 你已打开控制台.", "color:white; background-color:#4f90d9", ""));

  setTimeout(
    console.warn.bind(console, "%c S013-782 %c 你现在正处于监控中.", "color:white; background-color:#d9534f", "")
  );
});</script><script async src="/anzhiyu/random.js"></script><script async="async">(function () {
  var grt = new Date("04/01/2025 00:00:00"); //设置网站上线时间
  var now = new Date();
  var dnum;
  var hnum;
  var mnum;
  var snum;
  var nowHour;

  // 计算并更新天数、小时数、分钟数和秒数
  function updateTime() {
    now = new Date(); // 更新 now 的值
    nowHour = now.getHours(); // 更新 nowHour 的值
    var days = (now - grt) / 1000 / 60 / 60 / 24;
    dnum = Math.floor(days);
    var hours = (now - grt) / 1000 / 60 / 60 - 24 * dnum;
    hnum = Math.floor(hours);
    if (String(hnum).length == 1) {
      hnum = "0" + hnum;
    }
    var minutes = (now - grt) / 1000 / 60 - 24 * 60 * dnum - 60 * hnum;
    mnum = Math.floor(minutes);
    if (String(mnum).length == 1) {
      mnum = "0" + mnum;
    }
    var seconds = (now - grt) / 1000 - 24 * 60 * 60 * dnum - 60 * 60 * hnum - 60 * mnum;
    snum = Math.round(seconds);
    if (String(snum).length == 1) {
      snum = "0" + snum;
    }
  }

  // 更新网页中显示的网站运行时间
  function updateHtml() {
    const footer = document.getElementById("footer");
    if (!footer) return
    let currentTimeHtml = "";
    if (nowHour < 18 && nowHour >= 9) {
      // 如果是上班时间，默认就是"安知鱼-上班摸鱼中.svg"图片，不需要更改
      currentTimeHtml = `本站居然运行了 ${dnum} 天<span id='runtime'> ${hnum} 小时 ${mnum} 分 ${snum} 秒 </span><i class='anzhiyufont anzhiyu-icon-heartbeat' style='color:red'></i>`;
    } else {
      // 如果是下班时间，插入"安知鱼-下班啦.svg"图片
      let img = document.querySelector("#workboard .workSituationImg");
      if (img != null) {
        img.src = "";
        img.title = "";
        img.alt = "";
      }

      currentTimeHtml = `本站居然运行了 ${dnum} 天<span id='runtime'> ${hnum} 小时 ${mnum} 分 ${snum} 秒 </span><i class='anzhiyufont anzhiyu-icon-heartbeat' style='color:red'></i>`;
    }

    if (document.getElementById("runtimeTextTip")) {
      document.getElementById("runtimeTextTip").innerHTML = currentTimeHtml;
    }
  }

  setInterval(() => {
    updateTime();
    updateHtml();
  }, 1000);
})();</script><div class="js-pjax"><input type="hidden" name="page-type" id="page-type" value="post"></div><script>var visitorMail = "";
</script><script async data-pjax src="https://cdn.cbd.int/anzhiyu-theme-static@1.0.0/waterfall/waterfall.js"></script><script src="https://lf3-cdn-tos.bytecdntp.com/cdn/expire-1-M/qrcodejs/1.0.0/qrcode.min.js"></script><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.1.9/icon/ali_iconfont_css.css"><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.0.0/aplayer/APlayer.min.css" media="print" onload="this.media='all'"><script src="https://cdn.cbd.int/anzhiyu-blog-static@1.0.1/js/APlayer.min.js"></script><script src="https://cdn.cbd.int/hexo-anzhiyu-music@1.0.1/assets/js/Meting2.min.js"></script><script src="https://cdn.cbd.int/pjax@0.2.8/pjax.min.js"></script><script>let pjaxSelectors = ["head > title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"]
var pjax = new Pjax({
  elements: 'a:not([target="_blank"])',
  selectors: pjaxSelectors,
  cacheBust: false,
  analytics: false,
  scrollRestoration: false
})

document.addEventListener('pjax:send', function () {
  // removeEventListener scroll 
  anzhiyu.removeGlobalFnEvent('pjax')
  anzhiyu.removeGlobalFnEvent('themeChange')

  document.getElementById('rightside').classList.remove('rightside-show')
  
  if (window.aplayers) {
    for (let i = 0; i < window.aplayers.length; i++) {
      if (!window.aplayers[i].options.fixed) {
        window.aplayers[i].destroy()
      }
    }
  }

  typeof typed === 'object' && typed.destroy()

  //reset readmode
  const $bodyClassList = document.body.classList
  $bodyClassList.contains('read-mode') && $bodyClassList.remove('read-mode')
})

document.addEventListener('pjax:complete', function () {
  window.refreshFn()

  document.querySelectorAll('script[data-pjax]').forEach(item => {
    const newScript = document.createElement('script')
    const content = item.text || item.textContent || item.innerHTML || ""
    Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
    newScript.appendChild(document.createTextNode(content))
    item.parentNode.replaceChild(newScript, item)
  })

  GLOBAL_CONFIG.islazyload && window.lazyLoadInstance.update()

  typeof panguInit === 'function' && panguInit()

  // google analytics
  typeof gtag === 'function' && gtag('config', '', {'page_path': window.location.pathname});

  // baidu analytics
  typeof _hmt === 'object' && _hmt.push(['_trackPageview',window.location.pathname]);

  typeof loadMeting === 'function' && document.getElementsByClassName('aplayer').length && loadMeting()

  // prismjs
  typeof Prism === 'object' && Prism.highlightAll()
})

document.addEventListener('pjax:error', e => {
  if (e.request.status === 404) {
    pjax.loadUrl('/404.html')
  }
})</script><script charset="UTF-8" src="https://cdn.cbd.int/anzhiyu-theme-static@1.1.5/accesskey/accesskey.js"></script></div><div id="popup-window"><div class="popup-window-title">通知</div><div class="popup-window-divider"></div><div class="popup-window-content"><div class="popup-tip">你好呀</div><div class="popup-link"><i class="anzhiyufont anzhiyu-icon-arrow-circle-right"></i></div></div></div></body></html>